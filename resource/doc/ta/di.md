# தன்னார்வலர்களுக்கான ஒருங்கிணைப்பு வேண்டுகோள்

வேப்மேனில் தன்னார்வலர்களுக்கான ஒருங்கிணைப்பு வேண்டுகோள் ஏற்படுத்த முடியும், இது இயல்பானது இல்லை. தன்னார்வலர்களுக்கான ஒருங்கிணைப்பைக் கொண்டுபோக விருப்பமானதாகவும், [php-di](https://php-di.org/doc/getting-started.html) ஐப் பயன்படுத்துகிறது. பின்வரும், இது வேப்மேன் மற்றும் `php-di` ஐ கூட்டிணைத்த பயன்பாட்டுகள்.

## நிறுவுதல்
```
composer require psr/container ^1.1.1 php-di/php-di ^6 doctrine/annotations ^1.14
```

உள்ளீட்டை மாற்றம் `config/container.php` அதன் இறுதியில், பின்வரும் மற்றும் முடிவடையும்:
```php
$builder = new \DI\ContainerBuilder();
$builder->addDefinitions(config('dependence', []));
$builder->useAutowiring(true);
$builder->useAnnotations(true);
return $builder->build();
```

> `config/container.php` அடைவில் இறுதி ஒரு `PSR-11` மூலம் வெளிப்படைத்த ஒரு சீர்ப்பைச் செய்க. நீங்கள் `php-di` ஐப் பயன்படுத்த விரும்பாகப் போகிறீர்களா இல்லையேனாம், இங்கே உருவாக்கி பின்வரும் வகையில் ஒரு மற்ற சீர்ப்பை உருவாக்க முடியும்.
## கட்டமைப்பு உள்ளடக்கம் நுழைவு
`app/service/Mailer.php` என்ற புதியதை உருவாக்கவும்`(கோப்பு எதுவும் இல்லையானால் தயவுசெய்து உருவாக்குக)` கீழ்காணும் உள்ளடக்கத்தைக் கொண்டிருக்கலாம்:
```php
<?php
namespace app\service;

class Mailer
{
    public function mail($email, $content)
    {
        // மின்னஞ்சலை அனுப்பும் குறியீட்டை மறுக்கவும்
    }
}
```

`app/controller/UserController.php` கீழ்க்கான மாறி உள்ளது:

```php
<?php
namespace app\controller;

use support\Request;
use app\service\Mailer;

class UserController
{
    private $mailer;

    public function __construct(Mailer $mailer)
    {
        $this->mailer = $mailer;
    }

    public function register(Request $request)
    {
        $this->mailer->mail('hello@webman.com', 'வணக்கம் மற்றும் வரவேற்பை வாருகிறது!');
        return response('சரி');
    }
}
```
இந்தப் பாதிக்கத்தின் நேரமாக, `app\controller\UserController` ஐ நிரப்புவதற்கு பின்னர் கீழ்க்கான நிரல்களை பயன்படுத்த வேண்டாம்:
```php
$mailer = புதிய மின்னஞ்சலைஉருவாக்குக();
$user = புதிய பயனாளர்நிரலை உருவாக்குக்($mailer);
```
`php-di` ஐப் பயன்படுத்தும்போது, உங்களுக்குத் தொகுப்புப் பிரமிப்பின்றைக் கொண்ட பயன்பாட்டர்மன் உதவும். இரண்டாவது வகையான ஒன்றால் பயன்படுத்தப்படும் பின்னர், மேலும் கொடுக்கப்பட்ட சேவைகளை பயன்படுத்திகொள்ளலாம். கடந்துசெல்பவருக்கு எந்த செயலாக்கம் போன்ற தொடர்பாட்டையும் பாடுபடவில்லை. 

> **குறிப்பு**
> உருவாக்கப்பட்டிருக்கும் நிரலைமேல் குறிப்பிட்ட `php-di` மற்றும் மேல்நெறி அடைவு மூலம் உருவாக்கத்தில் பங்குகொடுக்கப்படாததாகும். அதனால், நமக்கு register என்ற நிரலை உருவாக்கத்தில் பங்குகொடுத்துக் கொள்ள வேண்டும். உதாரணத்தால்:

```php
use app\service\UserService;
use app\service\LogService;
use support\Container;

// new மெயினிலை உருவாக்கப்பட்ட நிரல் பயன்பாட்டை பெறவியலாம்
பயனாளர்_சேவை = புதிய பயனாளர்_சேவை();
// new மெயினிலை உருவாக்கப்பட்ட நிரல் பயன்பாட்டை பெறவியலாம்
பதிவுசேவை = புதிய பதிவுசேவை($path, $name);

// கடைசி வரிசையின் மெதுவான Container உருப்படியைப் பயன்படுத்துக் கொள்ளுங்கள்
பயனாளர்_சேவை = Container::get(UserService::வகை);
// Container உருப்படியைப் பயன்படுத்தி தொடர்ந்து பயனாளர்_சேவை உருவாக்குங்கள்
பதிவுசேவை = Container::make(LogService::வகை, [$path, $name]);
```
## குறிப்பு உள்ளீட்டை உள்ளீடு செய்யுங்கள்
உருமாறியின் பிடிவாங்கலின் பின்னர், நாங்கள் குறிப்பு உள்ளீட்டையும் பயன்படுத்தலாம். முக்கிய மொழியில் `app \ controller \ UserController` ஐ கீழே மாற்றுகிறோம்:
  
```php
<?php
namespace app\controller;

use support\Request;
use app\service\Mailer;
use DI\Annotation\Inject;

class UserController
{
    /**
     * @Inject
     * @var Mailer
     */
    private $mailer;

    public function register(Request $request)
    {
        $this->mailer->mail('hello@webman.com', 'வணக்கம் மற்றும் வரவேற்பு நலம்!');
        return response('நலம்');
    }
}
```
இந்த உதாரணத்தில் `@Inject` குறிச்சொல்லின் மூலம் இளைப்பைக் கொண்டு உள்ளது மற்றும் `@var` குறிச்சொல்லின் மூலம் பொதுவான வகையை அறிப்பதாகும். இந்த உதாரணம் உருவாக்குதலுடன் உறுப்பினர்களும் பொதுவாக ஒருங்கிணைக்கப்படுகின்றன, ஆனால் குறிப்பு மேலதிக நன்குகொள்ளப்பட்டது.

> **குறிப்பு**
> webman 1.4.6 பதிப்பினுள் முன்பு, கட்டமைப்பு மன்னிக்கப்படாதது அடிப்படையில் கட்டுப்பாட்டையும் பெரிது மேலதிக நம்பிக்கையையும் ஆதரிக்காது.
  
```php
<?php
namespace app\controller;

use support\Request;
use app\service\Mailer;

class UserController
{
    // webman<= 1.4.6 பதிப்பு முன்பு கட்டுப்பாடு கொடுக்கப்படாதது
    public function register(Request $request, Mailer $mailer)
    {
        $mailer->mail('hello@webman.com', 'வணக்கம் மற்றும் வரவேற்பு நலம்!');
        return response('நலம்');
    }
}
```
## உருமையான உருவாக்கப்பட்ட முதன்மை உள்ளீட்டு மூலம் உள்ளீடு

சாதாராணமாக உருவாக்க மூலம் உள்ளீடத்தில் வெளியிடப்படும் தரவுகள் தோன்ற முடியும். உதாரணமாக, மெயிலர் உருவாக்கின்றது smtp சர்வரின் ஐபி மற்றும் துரதியைப் பரிந்துரைக்கும்:
```php
<?php
namespace app\service;

class Mailer
{
    private $smtpHost;

    private $smtpPort;

    public function __construct($smtp_host, $smtp_port)
    {
        $this->smtpHost = $smtp_host;
        $this->smtpPort = $smtp_port;
    }

    public function mail($email, $content)
    {
        // மின்னஞ்சல்களை அனுப்புகிறோம் மாறி விடுவதற்கான குறிப்பு பூர்க்கிளை துவக்குக
    }
}
```

இந்த நிலையில், முன்னேற்றப்பட்ட உருவாக்க மூலம் தான் தரவு தேவைப்படும் கட்டமைகளை எதிர்பார்க்க முடியாது, ஏனெனில் `php-di` அதன் மதிப்பை எண்ணிக்கையாக அமைக்க முடியாது`$ smtp_host` `$ smtp_port` என்ன மதிப்பு என்ன என்ன என்பதை தெரியவில்லை. இந்த பரிந்துரையை முயற்சி செய்ய முடியும்.

`config / dependence.php`(கோப்பு இல்லையானால் தயவுசெய்து உருவாக்குக) கிடைக்கும் பின்னர் பின் உள்ள குறியீட்டில் கீழே உள்ள குறிப்புகளைச் சேர்க்கவும்:
```php
return [
    // ... மற்ற அமைப்புகளை இங்கே மறக்கி விட்டேன்
    
    app\service\Mailer::class =>  new app\service\Mailer('192.168.1.11', 25);
];
```
இப்பொழுது மேலெழுதிய `config / dependence.php` பின்வரும் குறிப்புகள் கிடைத்தால், பின்வரும் `app / service / Mailer` உருவாக்கு மாறுபட்ட முடிவுக்கு `app / service / Mailer` வரை ஆட்களைத் தானாகவே பயன்படுத்தும்.

நாங்கள் ஒருவராக கவனத்திற்கு வந்தோம்,`config/dependence.php` ல் `புதிய` பெயர் அல்லது எண் பதிவிறக்கச் செய்வதும் `Mailer` வகை மீது பிரச்சினைகள் ஏற்படாது, ஆனால் முடிவுற்கள் அல்லது மேற்கதிகள் கண்டறிவிப்பது முடியாது. தீர்வாகும் முறை, திறந்து உருவாக்கும் `கோண்டேன்டர் முக்(வகை)` பயன்படுத்தி மதிப்பை உருவாக்குவதும் ஆகும்.`Container::get (வகை பெயர்)` அல்லது `Container::make (வகை பெயர், [முடிவுகள்])` முறையைப் பயன்படுத்தி வகை ஐ `ஆரம்ப (வகை பெயர்)` மீட்க முன்னோட்டப்படுத்தலாம்.
முன்பே படிக்கப்பட்ட திட்டத்திற்கு எரிவுகளை பெறுவதை விரும்பினால், எப்போதும் முன்னுரிமை ஆவலுடன் இணைக்கவும் படிப்பினை எப்படியிருப்பது அது பொதுவான வகையில் `app\controller\UserController` பொது அல்லதுப் பிரிவுக்குள் `app \ service \ M தொகுப்பி` செய்வதைப் பார்த்துக் கொள்ள முடியும் .MailerInterface அளவு.
```php
<? Php
குடும்பகத்தின் பகுதியாக ஆவணப்படுத்தி;

முதன்முதலில் MailerInterface அடுக்கு வகை வருமானம்.
`PHPஆவணப்படுத்தில்
அச்சிடுவதும்
பொதுப்பாடக் கடைசியில் எடுக்கப்படும் அவசியம், உங்கள் எண்ணளவில்லை இயடப்பணிகளை மாற்று.
நிர்வாகிக்கும் கீழ் கீழ் நிறைவு பெறுகிறது.
```php
<? Php
குடும்பம்.

class Mailer ஏவு MailerInterface
{
    தொகுப்பின் அச்சிடுக
  

private $smtpHost;

    private $smtpPort;

    public function __construct($smtp_host, $smtp_port)
    {
        $this->smtpHost = $smtp_host;
        $this->smtpPort = $smtp_port;
    }

    public function mail($email, $content)
    {
        // மின்னஞ்சல் அனுப்புவதைச் சிறியது
    }
}
```

உள்ளீடு MailerInterface வகைக்கும் கட்டளைகளை உள்ளிடுக.
```php
<? Php
முன் _க்லாஸ்
படிப்பு.

use support\Request;
use app\service\MailerInterface;
பு஖ைப் \ அணுகல் \ அழைப்பு;

முற்பகல் உள்ளிட பயன்னர் வினாடி
    /**
     * @Inject
     * @var MailerInterface
     */
    private $mailer;

    பதிவுபெட்டி குப்பையில் (விண்ணப்பத்தைப் பெறுங்கள் $request)
    {
        $this->mailer->mail('hello@webman.com', 'வணக்கம் மற்றும் வரவேற்பு!');
        பின்னர் 'நன்கொடை' பதிலளிக்கவும்.
    }
}
```

`config/dependence.php` மதியில்`MailerInterface` வகைக்கு பிரத்தியேகமான பின்முக உடன்படுத்தப்படுகின்றது.
```php
பயன்னர் Psr \ கூவி \ அடைப்படைப்புக்குரிய சேமிப்புபலகை பெட்டி;
பின்னர் [
    app \ சேவை \ MailerInterface :: class => செய்வதற்கான பணியகத்தின் வகை விவர்க்களைத் தயக்கமாகச்  (`smtp_host` `=> `192.168.1.11 `, ஜதியானம் `=> `25]) உருவாக்குகள் உருவாக்கினால்
முடியும்.
```

போதுமானது, வணிக முன்னோக்கி MailerInterface வகை பயன்னர் குறிக்க வல்லுனரை ஆனது மாற்றும் பெண்களை தயங்கப்படுத்த முடியும் `config / அவசியமான்ப் / கடும்பு.பாதார்வை`-ம் அவசியத்தைப் பாருங்கள் தனிப்பட்ட மாற்றம். இது அணுகல் சேமிக்கும் உதாவகமானது.
> முன்னோக்கிய முன்னோக்கத்தில் முடிவுகளைச் செய்ய விரும்பும் நல்லது எனவே, நாங்கள் எந்த ஒரு அணுகல் உதாவகத்தையும் மாற்றவும் இல்லை என்பதை மட்டுமே அவசியமாக்க வேண்டும். பதிலளிப்புகளை மாற்றுவது மிகவும் பகிர்ந்த நல்லது.
## வேறு மாற்றங்கள் மற்றும் உள்ளீடு சீரமைப்பு
`config/dependence.php` படித்தலின் மூலம் கழிவுகளை வெளிப்படுத்தல் அனுபவிப்பது மற்றும் மற்ற மதிப்புகளையும், எந்த மதிப்புகளையும் ஒரு வகையில் வீடியோ கொண்டிருக்கும், அமைதியாக வீடியோ கொடுப்பது முடக்கப்பட்டுள்ளது.

உதாரணமாக `config/dependence.php` பின்னர் இப்படி வேண்டும்:
```php
return [
    'smtp_host' => '192.168.1.11',
    'smtp_port' => 25
];
```

இது போன்றதில் நாங்கள் `@Inject` மூலம் `smtp_host` மற்றும் `smtp_port` என்பதை வகை படிப்பது `பயனர்` விண்ணப்பம் வகைகளுக்கு மூலம் சேர்க்க முடியும்.
```php
<?php
namespace app\service;

use DI\Annotation\Inject;

class Mailer
{
    /**
     * @Inject("smtp_host")
     */
    private $smtpHost;

    /**
     * @Inject("smtp_port")
     */
    private $smtpPort;

    public function mail($email, $content)
    {
        // மின்னஞ்சல் அனுப்புபவை குறிக்கப்படுகிறது
        echo "{$this->smtpHost}:{$this->smtpPort}\n"; //  வெளிப்படும் 192.168.1.11:25
    }
}
```

> குறிக்கப்படும் பட்டியலில் `@Inject("key")` என்பதில் இருக்கும் மட்டுமே இருக்கலாம்


## மேலும் உள்ளடக்கம்
[php-di கையேடு](https://php-di.org/doc/getting-started.html) ஒருங்கிணைக்கப்பட்டுள்ளது செல்லப்புக்குக்குப் பார்க்கவும்
