# விரைவான துவக்கம்

webman மாதிரி [Eloquent ORM](https://laravel.com/docs/7.x/eloquent) அடிப்படையில் அமையும். ஒவ்வொரு தரவுத்தள அட்டவணை ஒரு பொருளை அதனுடைய தரவுத்தளத்துடன் பகிர் ஒரு 'மாதிரி' உண்டு. நீங்கள் மாதிரி மூலத்திற்கு தரவுத்தளத்தில் தரவுத்தள அந்தரகு விசாரிக்கலாம், தரவுத்தளத்தில் புதிய பதிவை இணைக்கலாம்.

ஆரம்பிக்கும் முன், உங்கள் `config/database.php` இல் தரவுத்தள இணைப்பை அமைத்திருக்க உறுதிப்படுங்கள்.

> எச்சரிக்கை: Eloquent ORM மாதிரி வளருநர்களை ஆதரிக்கலாம், பொதுவாக `composer require "illuminate/events"` ஐச் சேர்க்கவும் [எக்கம்ப்ள்](#மாதிரிக்கற்றவர்)

## எல்லாம்
```php
<?php
namespace app\model;

use support\Model;

class User extends Model
{
    /**
     * மாதிரிக்கு சாத்தியமான அட்டவணை
     *
     * @var string
     */
    protected $table = 'user';

    /**
     * மாதிரிக்கு உயர்புருவ மாற்றியம், இல்லையெனில் id
     *
     * @var string
     */
    protected $primaryKey = 'uid';

    /**
     * நேரடி தேதிவேட்டி செயல்பாடு ஏதாவது இருத்தல்
     *
     * @var bool
     */
    public $timestamps = false;
}
```

## அட்டவணைப்பெயர்
உங்கள் மாதிரியை உடைய அகலம் table பண்ண மூலம் கஸ்டம் தரவுத்தளத்தை குறிப்பிட முடியும்:
```php
class User extends Model
{
    /**
     * மாதிரி இடைமுக அட்டவணை பெயர்
     *
     * @var string
     */
    protected $table = 'user';
}
```

## முக்கிய விசேஷியம்
Eloquent முக்கியமாக, ஒவ்வொரு தரவுக்களங்கத்திலும் id என்ற பிரதானப் பொருளை என்மாற்றியம் என்பதை கருதும். நீங்கள் ஒரு பாதுகாக்கப்பட்ட $primaryKey ஆபரேட் பிராப்ட் மாலிடி பதிவுத்தொகையை மாற்ற முடியும்.
```php
class User extends Model
{
    /**
     * பிராப்ட் மாலிடி பிரதான அடக்கம், இயல்புநின்று id
     *
     * @var string
     */
    protected $primaryKey = 'uid';
}
```

Eloquent பிரமாணம் பிராப்ட் மாலிடி ஒன்று சொத்து மதியார மதியார மாய் ஆகும். இது அர்த்தம் அது பாதுக்காக தொகை int வகையாக மறைக்கப்படும் போது இருப்பதனை முதன்மையாகக் கருதிக்கொள்கின்றது. உங்கள் பிரயோகிப்பர சூழலில் மேல் வரவுமாயின் int அல்லாத அல்லாத பிராப்ட் யூஆர்க்கு பெயர்க்கான உலகவிளக்கம் அமைக்க $incrementing பண்ணலாம்:
```php
class User extends Model
{
    /**
     * மாதிரிக்கு பிராப்ட் பிரமாணம் எப்போது அது வளைவதற்கானுச்சாகும்
     *
     * @var bool
     */
    public $incrementing = false;
}
```

உங்கள் பிராப்ட்மொதுச்சாவுமற்று, தலைப்பு அல்லது சேட்பாட்டு மாதிரிக்கு சூழலை அமைக்க நீங்கள் பாதுகாக்கப்பட்ட உல்கவிளக்கம் $keyType அமைக்கலாம்:
```php
class User extends Model
{
    /**
     * தானியங்கி பெயர்க்கு மாற்று பிராப்ட்மெச்சாணம்
     *
     * @var string
     */
    protected $keyType = 'string';
}
```

## நேரடி கடிதத்தை
இயல்புநின்று, Eloquent உங்கள் தரவுத்தளத்தில் created_at மற்றும் updated_at உள்ளோடு எப்போதும் தெரியும். பார்க்கவும் Eloquent சவர்கள் இரவுகளை மாணவர்கள் வெளியில் வைத்து அமைத்தில், தரவுத்தள சரண்சாலையில் தேசியங்கடவுச்செயல்பாட்டை அமைக்கவும் $timestamps பண்ணலாம்:
```php
class User extends Model
{
    /**
     * நேரடி வைத்து பரதேசيச்சு செயல்பாடு
     *
     * @var bool
     */
    public $timestamps = false;
}
```
உங்கள் மாதிரியை இன்னும் மேலதிகரிப்பதன் ஆகிய சரண்சாலைக்கு அமைக்க delay உலகவிளக்கம் $dateFormat பதிவு அமைக்கவும்:
```php
class User extends Model
{
    /**
     * தேசியங்கடவுச் செயல்பாடு செம்பொலி
     *
     * @var string
     */
    protected $dateFormat = 'U';
}
```
உங்கள் நேசிக்கும் சேட்பாடத்தின் தேசியங்கடவுச்செயல்பாடுகளை கடத்தவும், உங்கள் மாதிரியில் பதிவு CREATED_AT மற்றும் UPDATED_AT ஆகியவற்க்கு திரைப்படைய அமைத்தில் பட்டியலானவைகள் அமையவும்:
```php
class User extends Model
{
    const CREATED_AT = 'creation_date';
    const UPDATED_AT = 'last_update';
}
```

## தரவுதள இணைக்கல்
இல உங்கள் பயன் செயபப்படங்கள் இயல்புநின்று, Eloquent மாதிரியே உங்கள் பயனுகாரபெயர்ச்சு மூல தரவுதள இணைக்கவும் என்ற நிலையில். நீங்கள் ஒரு வேக பெருகிப்பட்டி ப்ரதிவேட்டி முதலெழுதுதலை தரவுதளத்தில் சேர முடியும். உதாரணமாக:
```php
பயனர்கள் = app\model\User::all();

ஒவ்வொரு (பயனர்கள் என்பது பயனர்) {
    எழுது $user->name;
}
```
> குறிப்பு: ஏற்கனவே Eloquent மாதிரி ஒவ்வொரு சேட்பாட்டக்கும் கருத்துருமிக்ம் [சேட்டறி](queries.md) உளவுகள். நீங்கள் இவற்றை பயன்படுத்துகிறீர்கள் Eloquent சேட்டறிக்கும்.

## இணைக்கப்படும் விதிமீக்கங்கள்
Eloquent இரவுகள் அனைத்து முதலெழுதல்லாது முதல் விடயதங்கள் பிராப்டி. அதனால், நீங்கள் விடயதங்களை சேர்க்க முற்படுத்தியவர், get விடயதக்கும் தேர்ந்தெடுத்து உங்கள் விடயதங்களைப் பெற:
```php
பயனர்கள் = app\model\User::வழு('பெயர்', 'போரி', '%tom')
               ->ஆரிவாகங்கள்('uid', 'போது')
               ->வரம்பு(10)
               -> வா();
```

## உடைந்து எடுப்பதற்கு
நீங்கள் ச
## சேர்க்கை சேர்க்கை
நீங்கள் சேர்க்கை செய்யும் போது, முதலில் ஒரு புதிய மாதிரி நிபுணம் உருவாக்கி, அதற்கு பொருத்தமாக பிராப்தி அளிக்கவும், பின்னர் save செய்யும் முறை:
```php
<?php

namespace app\controller;

use app\model\User;
use support\Request;
use support\Response;

class FooController
{
    /**
     * புதிய பதிவேற்று (record) பயனர் அட்டையில் ஒரு புதிய பதிவேற்றைச் சேர்
     *
     * @param  Request  $request
     * @return Response
     */
    public function store(Request $request)
    {
        // கோரிக்கை சோதிக்கவும்

        $user = new User;

        $user->name = $request->get('name');

        $user->save();
    }
}
```

created_at மற்றும் updated_at நேரத்தை தானாகவே அமைக்கும் (மாதிரியில் $timestamps பண்பு உண்டுலை), கைப்பற்ற தேவை இல்லை.


## புதுப்பிப்பு
புதியதை உருவாக்க, மாதிரியை அமைக்க, பின்னர் save செய்ய உதவுவதைச் செய்வதும் புதிய மாதிரி பயனர்களும். மாதிரியைக் கண்டால், நீங்கள் முதன்மை சரக்குகளை அமையும்:

```php
$user = app\model\User::find(1);
$user->name = 'jerry';
$user->save();
```

## வடக்கெடுத்து புதுப்பிக்க
```php
app\model\User::where('uid', '>', 10)
  ->update(['name' => 'tom']);
```

## புதுப்பிக்கப்படுதல் பண்புகளை சோதிக்க
Eloquent முச்சுவரியாகக்கொண்டு இருந்தால் isDirty, isClean மற்றும் wasChanged முறைகள் அளித்துக் கொள்ளும், மாதிரி உள்ளடக்கம் சோதிக்கும் மற்றும் முறைகளையும் அறியும்.
isDirty முறை மாதிரியை திருத்தப்பட்டுவிட்டுபோன நேரத்தில் பொத்தானங்களை பரிசோ஧ிக்கின்றது. குறிப்பிடக்கூடிய பொத்தானங்கள் பொருநர பொத்தானங்கள் என்பதனையும் பார்த்தால் isClean முறையும் இங்கே உள்ளடக்கம் பொருநரில் பொத்தானங்களை பரிசோதிக்கும் விருப்பமும் அளித்துக்கொள்ளும்:
```php
$user = User::create([
    'first_name' => 'Taylor',
    'last_name' => 'Otwell',
    'title' => 'Developer',
]);

$user->title = 'Painter';

$user->isDirty(); // true
$user->isDirty('title'); // true
$user->isDirty('first_name'); // false

$user->isClean(); // false
$user->isClean('title'); // false
$user->isClean('first_name'); // true

$user->save();

$user->isDirty(); // false
$user->isClean(); // true
```
wasChanged முறை இந்தகால கொண்டு கடந்த மாதிரி சேமிக்கப்பட்ட பின்னர் ஏதும் பொத்தானங்கள் உள்ளிருந்தால் அது அறியும். குறிப்பிடக்கூடிய பொத்தானங்கள் பொருநர பொத்தானங்கள் என்பதனையும் பார்த்தால் wasChanged முறையும் இங்கே உள்ளடக்கம் பொருநரில் கடந்த மாதிரிக்கு மாதிரி செய்யப்பட்ட பின்னர் ஏதும் பொத்தானங்களை பரிசோதிக்கும் விருப்பமும் அளித்துக்கொள்ளும்:
```php
$user = User::create([
    'first_name' => 'Taylor',
    'last_name' => 'Otwell',
    'title' => 'Developer',
]);

$user->title = 'Painter';
$user->save();

$user->wasChanged(); // true
$user->wasChanged('title'); // true
$user->wasChanged('first_name'); // false
```
## பாட்டங்களை புதுப்பித்தல்
நீங்கள் create முறையான மேலும் புதிய மாதிரி சேமிப்புகளைச் சேமிக்க முடியும். இந்த முறை மாதிரி உள்ளதாக்கின்றது. ஆனால் இதை பயன்படுத்துவதற்கு முன்கூடிய நீங்கள் மாதிரிக்களின் $fillable அல்லது $guarded பண்புகளை குறிக்க வேண்டும், வேறுபட $fillable அல்லது $guarded ஹொல்டர் பொருநரின் அனைத்து ஆக்கப்பட்ட ஈல்லோக்வன்ட் மாதிரியின் முன்தண்டமாக கொண்டுவரும்.
```php
<?php

namespace app\model;

use support\Model;

class Flight extends Model
{
    /**
     * ஒரு மாதிரி $fillable ஆக்குக்கப்பட்ட அத்தகைய பண்புகள்.
     *
     * @var array
     */
    protected $fillable = ['name'];
}

```
நாங்கள் வளைந்திருந்த மாதிரிகளை $fillable முறையில் அமைத்து கொள்க்கின்ற போது, வருமுன்னர் create முறைக்கு மாதிரியை அளிக்க முடியும். create முறை பாதுகாக்க ஒரு மாதிரி பொருநர் அனுப்பப்படும்:
```php
$flight = app\modle\Flight::create(['name' => 'Flight 10']);
```
நீங்கள் ஏதேனும் மாதிரி குறிப்பிடக்கூடிய இருந்தால், fill முறைக்கு அமைத்துகொள்க்க முடியும்:
```php
$flight->fill(['name' => 'Flight 22']);
```
$fillable ஐ புதுப்பித்தல் «வெப்ளிஸ்ட்» பொறியாக்கபட முடியும், $guarded பண்புகளையும் அனுப்ப முடியும். $guarded பண்பு சுருங்குமானது நடுவரினி அல்லது அனிப்ப பட்ட வரினிப்பை அளிக்க முடியும். குறிக்கற்கால குணாங்களை அரட்சை செய்யலாம்: நீங்கள் ஒருவரைக் கலவரம் முறையாக $fillable அல்லது $guarded இரண்டும் ஒருவரேயாக பயன்பாடுகளாகப் பயன்படுத்த முடியும், அவை ஒன்றில் ஒன்றையோ பயன்படுத்துவதற்கு அனுமதிக்கோவதாகும். கீழே உள்ள உதாரணத்தில், price பொருநரின் வெப்ளிஸ்ட் பின் அனைத்து ஆக்கப்பட்ட ஈல்லோக்வன்ட் மாதிரிகளுக்கும் புதுப்பிப்பு குணாங்களை அளித்து கொள்கின்றன:
```php
<?php

namespace app\model;

use support\Model;

class Flight extends Model
{
    /**
     * அனுமதிக்கப்படுக்காது புதுப்பிக்க.
     *
     * @var array
     */
    protected $guarded = ['price'];
}
```

உங்களுக்கு ஏதேனும் ஒரு மாதிரி அளிக்க முடியாதுன்றே, நீங்கள் $guarded பண்புகளை காற்றாக அமைத்துகொள்கின்றன:
```php
/**
 * அனுமதிக்கப்படுக்காது புதுப்பிக்க.
 *
 * @var array
 */
protected $guarded = [];
```

## பிற எல்லா உருப்படக்கூடிய முறைகள்
firstOrCreate/ firstOrNew
இதில் இரு உங்களுக்கு பயன்படுத்த முடியாதுன்றுதான்: firstOrCreate மற்றும் firstOrNew. firstOrCreate முறையானது வெற்றிகத்தி / மதிப்பு ஊ
