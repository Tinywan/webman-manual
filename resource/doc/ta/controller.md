# கட்டுப்பாட்டு

புதிய கட்டுப்பாட்டு கோப்பு `app/controller/FooController.php` உருவாக்கவும்.

```php
<?php
namespace app\controller;

உதவி போன்ற Request;

வரை FooController
{
    பொதுவான வருகை index(Request $request)
    {
        return response('hello index');
    }
    
    பொதுவான வருகை hello(Request $request)
    {
        return response('hello webman');
    }
}
```

`http://127.0.0.1:8787/foo` ஐ வரையறுக்கும் போது, பக்கம் `hello index` ஐ திருப்புகிறது.

`http://127.0.0.1:8787/foo/hello` ஐ வரையறுக்கும் போது, பக்கம் `hello webman` ஐ திருப்புகிறது.

வடிவமைப்புகளை மாற்ற வேண்டியவையானால், [வடிவமைப்பு](route.md) ஐ பார்க்கவும்.

> **குறிப்பு**
> 404 அணுகல் இல்லை என்ற ஆக்கவும், `config/app.php` ஐ திறக்க, `controller_suffix` ஐ `Controller` ாக அமைத்து, மீளவும்.

## கட்டுப்பாட்டு இருப்பு
இருப்பு மாற்றத்தை டூம்ஸ் உள்ள 1.3 பதிப்பில், `config/app.php` இல் கட்டுப்பாட்டுக்கு பின்னி பிரதி முகிலுக்காக உட்கார்ந்து, கோப்பை அமைக்கலாம், `config/app.php` இல் `controller_suffix` ஐ அமைக்கவும், பின்னர் `config/app.php` இல் `controller_suffix` ஐ காலிப்படுத்தவும், ஆனால் செயலிக்கு நல்ல பகுதி பெற முடியாது, மதிப்பை இழுக்குதலுடன் மார்பாக பெறலாம்.

`app\controller\Foo.php` போன்ற வரை கோப்பை அமைப்பது முக்கியம்.

```php
<?php
namespace app\controller;

use support\Request;

வரை Foo
{
    பொதுவான வருகை index(Request $request)
    {
        return response('hello index');
    }
    
    பொதுவான வருகை hello(Request $request)
    {
        return response('hello webman');
    }
}
```

கட்டுப்பாட்டு பின்னூடரத்தை `Controller` என்ற பெயரிடவும், இதன் மூலம் கட்டுப்பாட்டு மற்றும் மாதிரி செயலாக்கத்துக்கு அடிப்படையாக அமைக்கலாம்.

## குறிப்பு
 - கட்டுக்காயவு அமைப்பானது `support\Request` பொருள்ைக்குறின், உபயோகப்படுத்தி அதன் மூலம் பயனர் இன்பங்களைப் பெற(get post header cookie போன்ற) முழு கருவியினை பெற முடியும், [வேண்டுகை](request.md)
 - கட்டுப்பாட்டில் எண், சூழலவலை அல்லது `support\Response` பொருளை அனுப்ப முடியும், ஆனால் மற்ற வகைகள் தரத்தை அனுப்ப முடியாது.
 - `support\Response` பொருள்்ைஅனுப்பு `response()` `json()` `xml()` `jsonp()` `redirect()` போன்ற சக்தி உதவி செயக்களிலும் உருவாக்க முடியும்.
 


## கட்டுப்பாட்டு உயிரிழபு

`config/app.php` இல் `controller_reuse` என்று உள்ள பத்திழை முடக்கினால், ஒவ்வொரு கோரிக்கையும் ஒருவருக்கான விருப்பமாக செயல்படுகிற அரட்டத்தை உருவாக்கும், கோரிக்கை முடிந்த பின் கட்டுப்பாட்டு உருவாக்கக் கூடியதில்லை, மேலும் கட்டுப்பாட்டை அழைத்தலும்.
ினவர் `config/app.php` உள்ள `controller_reuse` என்னும் பாதிப்பை `true` என்று அமைக்கின்ற போது, அனைத்து கோரிக்கைகளும் ஒருவருக்கான விருப்பமாக உருவாக்கப்படுகிறது, அதாவது, ஒரு ஆவணம் ஒருதவிகளின் பின்னூடர் கோரிக்கைகளை கூட்ட அனுமதிக்கிறது.
 
> **குறிகள்**
> கட்டுப்பாட்டு உருவாக்கத்தை மூட விருவாக்க தேவையில்லை என்பதான், webman>=1.4.0 வரையறுக்கும், அல்லது 1.4.0 பதி பின்னர் கட்டுப்பாட்டு இயக்கனத்தை மாற்ற முடிந்தது, மேலும் 1.4.0 பதி பின்னர் இயக்கனம், விருப்பம்ை மாற்ற முடியாது.

> **குறிகள்**
> வினைவற்றார்கள் அல்லது பயன்பாட்டுகள் இருக்கும் போது, கட்டுப்பாட்டு ஒரு சுருஞ்செயல் பண்ணுதல் ஆவது, கட்டுப்பாட்டு இயக்கனம் முடிக்கும் வரையறுக்கி குவியாமல் இருக்க வேண்டும், எனவே தற்போது இயக்கனம் முடிக்கும் போது அத்தகையவை பாதிப்புகளின் மாற்றக்கூடும்.

```php
<?php
namespace app\controller;

உதவி போன்ற Request;

வரை FooController
{
    பாதுகாப்பமில்லாதவர் $model;
    
    பொதுவான வருகை update(Request $request, $id)
    {
        $model = $this->getModel($id);
        $model->update();
        return response('ok');
    }
    
    பொதுவான வருகை delete(Request $request, $id)
    {
        $model = $this->getModel($id);
        $model->delete();
        return response('ok');
    }
    
    பாதுகாப்புமான வரைக் கோப்பு getModel($id)
    {
        // இந்த முறை முதல் ஒரு கோரிக்கை update?id=1 இன் பின் மாதிரி வளைகளைக் கொண்டோச், கிடைக்கும் இந்த மாதிரி வளைகடன் தெரிகின்றது
        // இந்த இரண்டாம் கோரிக்கை delete?id=2 இன் பின்மாதிரி வளைகளெச், அது 1 பதிவை நீக்கமுடிகிறது
        அது உங்கள் விருந்தை நித மாதிரி வளைய்க்க அணுகாமல் இருக்க குவியாமலும் உருவாக்க முடியாது.
        ஆகவேன், இந்த முறை முதல் ஒரு கோரிக்கை update?id=1 இன் பின் மாதிரி வளைகளைக் கொண்டோச், கிடைக்கும் இந்த மாதிரி வளைகடன் தெரிகின்றது
        இந்த இரண்டாம் கோரிக்கை delete?id=2 இன் பின்மாதிரி வளைகளெச், நீக்கும்படி அதே வளைகடன் தெரிக்கும்
        அது 1 பதிவை நஷ்டமாக்கும்படி,
        யானா model::find($id);
        return $this->model;
    }
}
```

> **குறிப்பு**
> கட்டுப்பாட்டில் `__construct()` நிர்வாகியின் மூலத்தில் கருவியீடை செயத் தருகி, ம
