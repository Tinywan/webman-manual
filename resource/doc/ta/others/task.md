# நிந்திய பாதிப்பு செயல்

நேரில் நாங்கள் நிஜைக்குள் வரம் செய்ய வேண்டும், அதற்கு உள்ளீடு பதிலளிக்காதே வரம் மற்றும் இதற்கான முறைகளை பயன்படுத்த வேண்டும் மற்றும் அவை வளரும் வரம் கண்கலப்படுத்தாவிட்டாது

## செயல்பாதுகள் பன்னுக்கு பயன்படுத்தவும்
[பார்வையாக [redis பன்னு](https://www.workerman.net/plugin/12) [stomp பன்னு](https://www.workerman.net/plugin/13)

### அறிமுகம்
திட்டிய வேலைகள் கோகளத்தில் வரம் செய்ய முடியாது

### இழுக்காக்கம்
வரம் உருவாக்கும் பொருளை உதவ முயற்சிக்கவேண்டும். உதாரணமாக [webman/push](https://www.workerman.net/plugin/2) உபயோகிப்ப வரம் செய்தியை பகிரிக்கைக்கு வேண்டும்.

## புதிய HTTP போர्टைச் சேர்க்கவும்
> **குறிப்பு**
> இந்த அம்சம் webman புள்ளி உள்ளீடுசெய்யவும் >=1.4 

பெற்றுப்பந்து HTTP போர்டும் கூடிய விளையாட்டுகளை செயலாகக் கொள்ளும். இந்த உள்ளீடுகள் வழியாக இல  செல்லும் உள்ளீடுகள் நேர்முக சிக்கல்களும் செய்யலாகாது என்பதை நினைவிக்கவும்.

### அறிமுகம்
படிம உள்ளீடுகளை நேர்முகமாக அங்கே அளவுசெய் இல்லையாம்

### இழுக்காக்கம்
கூட்டுவாருகிற கோளங்கள் உள்ளிடம் `config/process.php` இல் பதிவேற்றுவது
```php
return [
    // ... இங்கு பிற உள்ளீடுகளை துலங்கப்ப்கின்றேன் ...
    
    'task' => [
        'handler' => \Webman\App::class,
        'listen' => 'http://0.0.0.0:8686',
        'count' => 8, // செயல்வரிசையின் எண்ணிக்கை
        'user' => '',
        'group' => '',
        'reusePort' => true,
        'constructor' => [
            'request_class' => \support\Request::class, // வரம் வரி நியமங்கள்
            'logger' => \support\Log::channel('default'), // பதிவு உத்தி
            'app_path' => app_path(), // வர பதிகை இடம்
            'public_path' => public_path() // பொதை பாதை இடம்
        ]
    ]
];
```

இப்படி மீதி தொடர்பில் இல 8686 போர்டுக்கு வரம் செலுத்தும், வேறு வரம்காள் நியூனம் அசைவத்திற்காக வரம்காள் செயல்பாதாக உபயோகிக்காதேன்.

முந்தையவை புரியவில்லை(front-end) தொடர்புகளைப் பாதிப்பவருகிறுனோம், 8686 போர்டுக்கு உதிரிப்பை கூடக் கொள்ள வேண்டும். இளிமா(/tast ஆக) போர்டுக்கு வரம்காள் அண்டைனாவ்வ ஒழுகும் கருவியாக்க அளவுசீரா:
```
upstream webman {
    server 127.0.0.1:8787;
    keepalive 10240;
}

# இன்/புதிய 8686 போர்ட்டைப் பொதியவு
upstream task {
   server 127.0.0.1:8686;
   keepalive 10240;
}

server {
  server_name webman.com;
  listen 80;
  access_log off;
  root /path/webman/public;

  # /tast தவிர உளவைப் பாதிபாக்க 8686 போர்டைப் பொதியவு
  location /tast {
      proxy_set_header X-Real-IP $remote_addr;
      proxy_set_header Host $host;
      proxy_http_version 1.1;
      proxy_set_header Connection "";
      proxy_pass http://task;
  }

  # பிற உதிரிக்கு் பூலைப் பாதிபாக்க 8787 போர்டைக்கு வரம்செய்யுதனவு
  location / {
      proxy_set_header X-Real-IP $remote_addr;
      proxy_set_header Host $host;
      proxy_http_version 1.1;
      proxy_set_header Connection "";
      if (!-f $request_filename){
          proxy_pass http://webman;
      }
  }
}
```

இது வழி பெருக்காள் எண்ணிக்கை 8686 போர்டுக்கு வரம்காள் செலுத்தும் கொள்ள வேண்டும், 8787 போர்டுகள் வரம்பதிவானவைக்காள் புரியவில்லை(front-end).
