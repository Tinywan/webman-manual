# பல மொழிகள்

பல மொழிகளை நாங்கள் [symfony / translation](https://github.com/symfony/translation) உருவாக்கும் பொருளைப் பயன்படுத்துகின்றோம்.

## நிறுவும்
```php
composer require symfony/translation
```

## மொழியின் அடிப்படையில் உருவாக்கம்
webman இயலாமைப்பு இருப்பினும், மொழியின் அடிப்படையின் பேரகரப்பான `மொழிபக்கம் / மொழிகள்` அடைவில் (அதன் பக்கத்துடன் ஏதும் இல்லை என்றால் தயவுசெய்து நீங்களே உருவாக்கவும்), மொழிக்குள் ஏதோ ஒன்று உள்ளது. மொழியை வரையறுக்கும் இயலாமைப்பில் முதன்முதலில் `செய்முறைப்படுத்து ()` செய்யுங்கள் என்று அமைக்கவும். மாதிரி உதாரணமாக கீழே குறிப்பிடப்பட்டுள்ளது:
```php
resource/
└── translations
    ├── en
    │   └── messages.php
    └── zh_CN
        └── messages.php
```

அனைத்து மொழி கோப்புகளும் ஒரு வரிசையாக வந்துவிட்டாலும் பின்னோக்கமளிக்கும் வரையறை தருகின்றன என்பதனைக் கொண்டுள்ளனர்:
```php
// resource/translations/en/messages.php

return [
    'hello' => 'Hello webman',
];
```

## கட்டமைப்புகள்

`config / translation.php`

```php
return [
    //இயல்பு மொழி
    'locale' => 'zh_CN',
    //பின்னுட்ட மொழி, தற்போதைய மொழியில் மொழிபெயர்ப்புக்கும் மொழியில் 
    'fallback_locale' => ['zh_CN', 'en'],
    // மொழி கோப்புகளை உள்ளடக்கும் கோப்பகத்தின் மேல் சேமிக்கவும்
    'path' => base_path() . '/resource/translations',
];
```

## மொழிபெயர்ப்பு

மொழிபெயர்ப்பு `மூலை ()` வைப்பதனைப் பயன்படுத்தும்.

மொழிக்கான கோப்பை உருவாக்குவது `resource / translations / zh_CN / messages.php` கோப்பிற்கு கீழே வழங்கப்பட்டது:
```php
return [
    'hello' => 'வணக்கம் வேலைமான்',
];
```

கோப்பு `app / controller / UserController.php` ஐ உருவாக்குங்கள்:
```php
<?php
namespace app\controller;

use support\Request;

class UserController
{
    public function get(Request $request)
    {
        $hello = trans('hello'); // வணக்கம் வேலைமான்!
        return response($hello);
    }
}
```

`http://127.0.0.1:8787/user/get` ஐ அணுக பொருந்தும் டார் "வணக்கம் வேலைமான்!" என்றால் மறுபடியும் வருகிறது.
## இயல்பு மொழியை மாற்றுவது

மொழியை மாற்ற எளியவாக `locale()` செயல்பாடையை பயன்படுத்தவும்.

புதிய மொழி கோப்பு `resource/translations/en/messages.php` பெயரிடப்படுகின்றது:
```php
return [
    'hello' => 'வணக்கம் உலகம்!',
];
```

```php
<?php
namespace app\controller;

use support\Request;

class UserController
{
    public function get(Request $request)
    {
        // மொழி மாற்றி
        locale('en');
        $hello = trans('hello'); // வணக்கம் உலகம்!
        return response($hello);
    }
}
```
`http://127.0.0.1:8787/user/get` ஐப் பார்க்கலாம் எனக்கு "வணக்கம் உலகம்!" என்று திரும்பும்.

`trans()` செயல்பாட்டின் முதன்முதல் 4 ஆம் அளவுருக்கு மொழி மாற்றவும் செய்ய முடியும். மேலும் `trans()` செயல்பாட்டின் மாற்ற தனிப்பட்ட மொழியை தெரிந்துகொள்ள இன்னொரு மிட்டம் பயன்படுத்தலாம்.

```php
<?php
namespace app\controller;

use support\Request;

class UserController
{
    public function get(Request $request)
    {
        // 4 ஆம் அளவு மொழி மாற்றவும்
        $hello = trans('hello', [], null, 'en'); // வணக்கம் உலகம்!
        return response($hello);
    }
}
```

## ஒவ்வொன்றுக்கும் முகாமையான மொழி அமைக்கு

translation ஒரு தனித்துவ் திருப்பமாகும், இதனால் அனைத்து கோரிக்கைகளும் இந்த நடைமுறையைப் பகிர்ந்துகொள்கின்றன. இரண்டாவது முனையக்காரம் `locale()` ஐ பயன்படுத்தி இயல்பு மொழியை அமைக்கும். மேலும் நடைமுறையில் பிற கோரிக்கைகள் இரண்டாவது முனையக்காரமைப்பில் அடையாளப்படுத்தலாம். எனவே ஒவ்வொன்றுக்கும் முகாமையான மொழி அமைக்க வேண்டும். உதாரணமாக பின்வரும் மேற்கோள்களைப் பயன்படுத்தி ஒருங்கோட்டமாக அமைத்துக்காட்டலாம்

`app/middleware/Lang.php` என்ற கோப்பை உருவாக்கவும்(அல்லது இல்லையின் தயவுசெய்து உருவாக்கவும்போது) பின்வருவனாக.

```php
<?php
namespace app\middleware;

use Webman\MiddlewareInterface;
use Webman\Http\Response;
use Webman\Http\Request;

class Lang implements MiddlewareInterface
{
    public function process(Request $request, callable $handler) : Response
    {
        locale(session('lang', 'zh_CN'));
        return $handler($request);
    }
}
```

`config/middleware.php` கோப்பில் தனி மொழி நிறுவ பாதிப்பு மேலதிக மேல்நிலை மைதன்களை சேர்ப்பதுபோன்று கூடுதல் நிச்சயமான மேற்கோள் பயன்படுத்தவும்.

```php
return [
    // மேல்நிலை மைதன்கள்
    '' => [
        // ... இந்த பின்வருவர்கள் மற்றும் பிற மைதன்களை மறைக்கின்றன்
        app\middleware\Lang::class,
    ]
];
```
## பிரதி செயல்மறையில் பயன்படுத்துவது
நேரடி நிபந்தனையைக் கொண்டு மற்றொன்றுக்குச் சேர்ப்பதற்கான மாற்றத்தை ஒரு கையாளாக்கல் அப்படியே தேவைப்படும், உரையின் ஒரு பகுப்பு அனுபவத்தை செயல்படுத்த நீங்கள் கொண்டுள்ளீர்கள். 

```php
trans('வணக்கம் ' . $பெயர்);
``` 
இது பணம் பெரு மாறியின்பபோது மாற்றத்தை மீண்டும் வெளியீடு இருக்கும் என்ற நிபந்தனையைக் குறிப்பதற்கு உதவுகிறது.

`resource/translations/zh_CN/messages.php` ஐ மாற்றினால் பின்வரும் வடிவத்தில் மாற்றப்பட்டுவிடும்:

```php
return [
    'வணக்கம்' => 'வணக்கம் %name%!',
];
```
மாற்றப்பட்டுள்ளதின் மூலம் கேள்விக்கு புதிய அமைத்தியை வழங்கலாம்.

```php
trans('வணக்கம்', ['%name%' => 'webman']); // வணக்கம் webman!
```

## பல்வேறு எண்களை செயலாக்குகின்றது
சில மொழிகள் பொருட்களின் எண்ணிக்கையை பார்க்க, விவராவலுக்குச் செல்லும் வடிவத்தை அனைவரும் இருக்கும், எ.கோப்புக்களை பார்க்க
```php
விவரங்களை எண்ணத்தினால் மாற்றுவதற்கு நாங்கள் ஒரு வலவுறுதலை (`|`) பயன்படுத்துகிறோம்.

மொழி கோப்பு `resource/translations/en/messages.php` ஐ புதுப்பிக்கவும்`ஆப்பிள் எண்ணிக்கை` வழங்குங்கள்:

```php
return [
    // ...
    'ஆப்பிள் எண்ணிக்கை' => 'ஒரு ஆப்பிள் உள்ளது|ஆப்பிள்கள் %count% உள்ளன',
];
```

```php
trans('ஆப்பிள் எண்ணிக்கை', ['%count%' => 10]); // ஆப்பிள்கள் 10 உள்ளன்
```

மேலும், எண் வரம்புகளைக் குறிப்பிட முடியும், மேலும் மோசிய எண் விதிக் கோப்பை உருவாக்குவதற்கான கடினத்துடன் அமைத்தியாக உருவாக்கலாம்:
```php
return [
    // ...
    'ஆப்பிள் எண்ணிக்கை' => '{0} ஆப்பிள்கள் இல்லை|{1} ஒரு ஆப்பிள் உள்ளது|]1,19] ஆப்பிள்கள் %count% உள்ளன்|[20,Inf[ அதிகமான ஆப்பிள்கள் உள்ளன்'
];
```

```php
trans('ஆப்பிள் எண்ணிக்கை', ['%count%' => 20]); // அதிகமான ஆப்பிள்கள் உள்ளன்
```

## மொழிக் கோப்பு குறியீட்டை நீக்குவது

மொழிக் கோப்பு இயல்புநிலை பெயர் `messages.php` ஆகும், உண்மையின் நீங்கள் மற்றொரு பெயர் மொழிக் கோப்பை உருவாக்கலாம்.

மொழித் தேவைப்படும் கோப்பை `தரவிறக்கு/மொழித் கட்டத்தின்/தன்னியக்க முறையில் உருவாக்கவும்`:

```php
return [
    'வணக்கம்_நிர்வாகி' => 'வணக்கம் நிர்வாகி!',
];
```

`trans()` அன்றுக்கு மூன்றாவது மாதிரி அமைத்தியை  (`messages.php` முடிவில் குறிப்பிடப்படுவதில் மூன்றாவது அப்பணு குறியீட்டைக் குறிக்கலாம்)கம்பி மாற்றுத்தொடர் மூலம் கேட்கப்படும்:

```php
trans('வணக்கம்', [], 'நிர்வாகி', 'zh_CN'); // வணக்கம் நிர்வாகி!
```

## மேலும் தகவல்கள்
`symfony/translation` ஆவணத்தைப் பார்வையிடவும். [இங்கே கிளிக் செய்யவும்](https://symfony.com/doc/current/translation.html)
