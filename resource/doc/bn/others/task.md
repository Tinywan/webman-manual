# ধীরগতি ব্যবসা প্রসেস

সময়ের সাথে আমাদের ধীরে ধীরে ব্যবসা করতে হয়, এই ধীরগতি ব্যবসা থেকে webman-এর অন্যান্য অনুরোধ প্রসেসিং প্রভাবিত না হওয়ার জন্য, এই ব্যবসা বিভিন্ন প্রসেসিং ব্যবস্থা অনুসারে করা যেতে পারে।

## মেসেজ কিউ ব্যবহার
[রেডিস কিউ](https://www.workerman.net/plugin/12) [স্টাম্প কিউ](https://www.workerman.net/plugin/13) দেখুন

### সু-লাভ
হাড়াহাজার ব্যবসা প্রসেসিং অনুরোধের সাথে মোকাবিলা করা যায়

### দুশল্য
প্রত্যাশিত ফলাফল ক্লায়েন্ট সাথে সরাসরি ফিরিয়ে দেয়া যায়না। ফলাফল পাঠানোর প্রয়োজন হলে ফলাফল পুশ করার জন্য অন্য সেবা সহায়ক, উদাহরণস্বরূপ [webman/push](https://www.workerman.net/plugin/2) ব্যবহার করা যেতে পারে।

## HTTP পোর্ট যোগ

> **লক্ষ্য করুন**
> এই বৈশিষ্ট্যটি webman-framework>=1.4 এর প্রয়োজন

স্লো অনুরোধ প্রসেস করতে একটি HTTP পোর্ট যোগ করা, এই ধীরে ধীরে অনুরোধগুলি এই পোর্ট এ বিশেষ একটি সমূহ প্রসেস করার মূল হল যে পরিণাম সরাসরি ক্লায়েন্ট কে ফিরিয়ে দেওয়া।

### সু-লাভ
ডেটা সরাসরি ক্লায়েন্ট কে ফিরিয়ে দেওয়া যায়

### দুশল্য
হাড়াহাজার অনুরোধ মোকাবিলা করা যায়না

### প্রয়োজনীয় পদক্ষেপ
`config/process.php` ফাইলে নিম্নলিখিত কনফিগারেশন যুক্ত করুন।
```php
return [
    // ... অন্যান্য কনফিগারেশনগুলি অংশ কাটা দেওয়া হয়েছে ...
    
    'task' => [
        'handler' => \Webman\App::class,
        'listen' => 'http://0.0.0.0:8686',
        'count' => 8, // প্রসেস সংখ্যা
        'user' => '',
        'group' => '',
        'reusePort' => true,
        'constructor' => [
            'request_class' => \support\Request::class, // অনুরোধ ক্লাস সেটিং
            'logger' => \support\Log::channel('default'), // লগ ইন্সট্যান্স
            'app_path' => app_path(), // app পাথ স্থান
            'public_path' => public_path() // পাবলিক পাথ স্থান
        ]
    ]
];
```

এভাবে স্লো ইন্টারফেসগুলি পারে `http://127.0.0.1:8686/` উপর কম্পিউটেশন করতে পারে, অন্য প্রসেসিং এর ব্যবসা প্রসেসিং ক্ষতিতে।

মুখে মুখ সংযোগকারীর জন্য পোর্ট এর পারদর্শিতা হয়, একটি প্রতিবেশী আধারে প্রথম ক্ষেত্রে তাসত ফ্঳্যাগের সাথে যুক্ত। মনে করুন স্লো ইন্টারফেস অনুরোধের পথগুলি উপর ` /tast` দন্ডিত হওয়া আশা। এইরকম বিশেষ একটি nginx কনফিগারেশনের জন্য সম্পূর্ণ নেম হোমের পত্তি দেয়া হয়:
```
upstream webman {
    server 127.0.0.1:8787;
    keepalive 10240;
}

# একটি 8686 আপস্ট্রিম যোগ করুন
upstream task {
   server 127.0.0.1:8686;
   keepalive 10240;
}

server {
  server_name webman.com;
  listen 80;
  access_log off;
  root /path/webman/public;

  # /tast দিয়েই চালিয়ে যাওয়ার অনুরোধ 8686 পোর্ট ফ্রন্টে আনে, আপনার চোখদৃষ্টির অনুসারে /tast এর স্থানগুলি পরিবর্তন করুন
  location /tast {
      proxy_set_header X-Real-IP $remote_addr;
      proxy_set_header Host $host;
      proxy_http_version 1.1;
      proxy_set_header Connection "";
      proxy_pass http://task;
  }

  # অন্য অনুরোধের জন্য মূল 8787 পোর্ট ফ্রন্টে আনে
  location / {
      proxy_set_header X-Real-IP $remote_addr;
      proxy_set_header Host $host;
      proxy_http_version 1.1;
      proxy_set_header Connection "";
      if (!-f $request_filename){
          proxy_pass http://webman;
      }
  }
}
```

এভাবে, ক্লায়েন্ট যখন `domain.com/tast/xxx` তে অ্যাক্সেস করে, তখন পুরোটা 8686 পোর্ট থেকে আলাদা প্রসেসিং হয়, 8787 পোর্টের অনুরোধ প্রসেসিং এর উপর প্রভাব ফেলেনা।
