# দ্রুত শুরু

ওয়েবম্যান মডেল, [Eloquent ORM](https://laravel.com/docs/7.x/eloquent) এর উপর ভিত্তি করে। প্রতিটি ডাটাবেস টেবিলের সাথে ইন্টারঅ্যাক্ট করতে একটি নির্দিষ্ট "মডেল" রয়েছে। আপনি মডেল ব্যবহার করে ডাটাবেস টেবিলে ডেটা জন্য কুয়েরি করতে পারবেন, এবং নতুন রেকর্ড টেবিলে ইনসার্ট করতে পারবেন।

শুরু করার আগে, দয়া করে নিশ্চিত করুন যে `config/database.php` সংলগ্ন ডাটাবেস সংযোগ কনফিগার করা হয়েছে।

> দ্রষ্টব্যঃ Eloquent ORM মডেল অবশ্যই মডেল অবলকন সমর্থন করতে এক্সট্রা আমদানি করতে হবে `composer require "illuminate/events"` [উদাহরণ](#মডেল-অবাদী)

## উদাহরণ
```php
<?php
namespace app\model;

use support\Model;

class User extends Model
{
    /**
     * মডেলের সাথে যুক্ত টেবিলের নাম
     *
     * @var string
     */
    protected $table = 'user';

    /**
     * পূর্বরূপ প্রাথমিক চাবি, ডিফল্টভাবে id ছিল
     *
     * @var string
     */
    protected $primaryKey = 'uid';

    /**
     * কি স্বয়ংক্রিয়ভাবে সময়চিহ্ন রক্ষা করা হবে
     *
     * @var bool
     */
    public $timestamps = false;
}
```

## টেবিলের নাম
আপনি মডেলে কাস্টম ডাটাবেস টেবিল নির্ধারণ করতে table বৈশিষ্ট্য প্রস্তুত করে নিতে পারেন:
```php
class User extends Model
{
    /**
     * মডেলের সাথে যুক্ত টেবিলের নাম
     *
     * @var string
     */
    protected $table = 'user';
}
```

## প্রাথমিক চাবি
Eloquent এগিয়ে করে যায় যেভাবে প্রতিটি ডাটাবেস টেবিলের এক নাম id আছে। আপনি এই কোনো সুরক্ষিত $primaryKey বৈশিষ্ট্য পুনরায় লিখতে পারেন.
```php
class User extends Model
{
    /**
     * পূর্বরূপ প্রাথমিক চাবি, ডিফল্টভাবে id ছিল
     *
     * @var string
     */
    protected $primaryKey = 'uid';
}
```

Eloquent মানে করে প্রাথমিক কী একটি অটোমেটিক পূর্বরূপে একটি পূর্ণসংখ্যা মান, এটা মানে এবংে৷ যদি আপনি প্রাথমিক কীভাবে ব্যবহার করতে চান এর বাইরে বা সংখ্যাত্মক নয় তাহলে আপনাকে সাধারন $incrementing বৈশিষ্ট্য ফলস সেট করতে হবে
```php
class User extends Model
{
    /**
     * মডেল প্রাথমিক একটি ইনক্রিমেন্ট কিনা তা নির্দেশ করে
     *
     * @var bool
     */
    public $incrementing = false;
}
```

যদি আপনার প্রাথমিক চাবি একটি পূর্ণসংখ্যা না হয় তবে আপনি ভিতরের $keyType সুরক্ষিত বৈশিষ্ট্য স্ট্রিং হিসেবে সেট করা দরকার:
```php
class User extends Model
{
    /**
     * স্বয়ংক্রিয় বৃদ্ধি সারির "ধরণ"।
     *
     * @var string
     */
    protected $keyType = 'string';
}
```

## টাইমস্ট্যাম্প
পূর্বরূপে, Eloquent আপনার ডাটা টেবিলে created_at এবং updated_at অবশ্যই আছে মানে। আপনি যদি এই দুটি কলামকে Eloquent স্বয়ংক্রিয়ভাবে ব্যবস্থাপনা করা না চান, তবে মডেলের $timestamps বৈশিষ্ট্যকে মিথ্যা সেট করুন:
```php
class User extends Model
{
    /**
     * স্বয়ংক্রিয়ভাবে সময়চিহ্ন নিপুন
     *
     * @var bool
     */
    public $timestamps = false;
}
```
যদি আপনি কাস্টম টাইমস্ট্যাম্প ফরম্যাট চান, আপনার মডেলে $dateFormat বৈশিষ্ট্য সেট করুন। এই বৈশিষ্ট্য দ্বারা তারিখ প্রোপার্টি ডাটাবেসে সংরক্ষণের উপায় এবং মডেলকে একার বা JSON বিন্যাসে সিরিয়ালাইজ করার উপায় নির্ধারণ করা হয়েছে:
```php
class User extends Model
{
    /**
     * সংরক্ষণ তারিখ নিয়ম
     *
     * @var string
     */
    protected $dateFormat = 'U';
}
```
যদি আপনি কাস্টম স্টোরেজ টাইমস্ট্যাম্প ফিল্ড নিতে চান, তাহলে আপনি মডেলে সেট CREATED_AT এবং UPDATED_AT কন্সট্যান্টের মানগুলি সেট করতে পারেন:
```php
class User extends Model
{
    const CREATED_AT = 'creation_date';
    const UPDATED_AT = 'last_update';
}
```

## ডাটাবেস সংযোগ
পূর্বনির্ধারিতভাবে, Eloquent মডেলগুলি আপনার অ্যাপ্লিকেশনের ডিফল্ট ডাটাবেস সংযোগ ব্যবহার করবে। আপনি মডেলের $connection বৈশিষ্ট্য সেট করে মডেল জন্য একটি বিভিন্ন সংযোগ নির্ধারণ করতে পারেন:
```php
class User extends Model
{
    /**
     * মডেলের সংযোগের নাম
     *
     * @var string
     */
    protected $connection = 'connection-name';
}
```

## ডিফল্ট বৈশিষ্ট্য মান
মডেলের কিছু বৈশিষ্ট্যের ডিফল্ট মান নির্ধারণ করতে চাইলে, আপনি মডেলের $attributes বৈশিষ্ট্য সেট করতে পারেন:
```php
class User extends Model
{
    /**
     * মডেলের ডিফল্ট মান।
     *
     * @var array
     */
    protected $attributes = [
        'delayed' => false,
    ];
}
```

## মডেল অনুসন্ধান
মডেল এবং এর সংলগ্ন ডাটাবেস টেবিল তৈরি করার পর, আপনি ডাটাবেস থেকে ডেটা দেখতে পারেন। Eloquent মডেলগুলি পর্যায়ে একটি শক্তিশালী কুয়েরি বিল্ডার হিসাবে চিন্তা করুন, যা দ্রুত তাদের সংলগ্ন ডাটাবেস টেবিল অনুসন্ধান করতে দেয়। উদাহরণস্বরূপঃ
```php
$users = app\model\User::all();

foreach ($users as $user) {
    echo $user->name;
}
```
> পরামর্শ: Eloquent মডেল একেবারেই কুয়েরি বিল্ডার, তাই আপনার যেসব প্রয়োগযোগ্য মেথড পড়া উচিত [কুয়েরি বিল্ডার](queries.md)। আপনি Eloquent সার্চ এই মেথড ব্যবহার করতে পারেন।

## অতিরিক্ত বেশীক
Eloquent এর সব ফলাফল প্রদর্শন করা all মেথডটি মডেলের সব ফলাফল প্রদর্শন করবে। Eloquent মডেল হল একটি কুয়েরি বিল্ডার সুতরাং আপনি অতিরিক্ত অবৈধ যোগ করতে পারেন, এরপর get মেথড ব্যবহার করে অনুসন্ধানের ফলাফল পাবেন:
```php
$users = app\model\User::where('name', 'like', '%tom')
               ->orderBy('uid', 'desc')
               ->limit(10)
               ->get();
```

## মডেল পুনরায় লোড
আপনি fresh এবং refresh মেথড ব্যবহার করে মডেল পুনরায় লোড করতে পারেন। fresh মেথড ডাটাবেস থেকে মডেলটি পুনরায় জানা যাবে। বর্তমান মডেল ইন্সট্যান্স কোনোভাবেই পরিণাম না পায়:
```php
$user = app\model\User::where('name', 'tom')->first();

$fresh_user = $user->fresh();
```

refresh মেথড নতুন ডেটাবেস ডাট
## সংগ্রহ অনুসন্ধান
আপনি মডেলের কাউন্ট, সাম, এবং অন্যান্য সংগ্রহ ফাংশনগুলির সাথে আরোপ কার্যকারিতা ব্যবহার করতে পারবেন যেমন কাউন্ট, সাম এবং ম্যাক্স মেথড। এই পদক্ষেপগুলি কেবল মডেল ইন্সট্যান্সের বিকল্প মান প্রদান করবে, মডেল ইউইল আইটাম প্রদর্শন করবে না:
```php
$count = app\model\Flight::where('active', 1)->count();

$max = app\model\Flight::where('active', 1)->max('price');
```

## ইনসার্ট
ডেটাবেসে নতুন রেকর্ড যুক্ত করতে, আপনার নতুন মডেল ইন্সট্যান্স তৈরি করতে হবে, এটা ইন্সট্যান্সে মান সেট করতে হবে, এবং তারপরে সেভ মেথডটি কল করতে হবে:
```php
<?php

namespace app\controller;

use app\model\User;
use support\Request;
use support\Response;

class FooController
{
    /**
     * ব্যবহারকারী তালিকায় নতুন রেকর্ড যুক্ত করা
     *
     * @param  Request  $request
     * @return Response
     */
    public function store(Request $request)
    {
        // অনুরোধ যাচাই করুন

        $user = new User;

        $user->name = $request->get('name');

        $user->save();
    }
}
```

created_at এবং updated_at স্থগিতিগুলি স্বয়ংক্রিয়ভাবে সেট করা হবে (যখন মডেলে $timestamps প্রোপার্টি true হয়), এর জন্য ম্যানুয়ালি মান সেট করা আবার প্রয়োজন হবে না।


## আপডেট
সেভ মেথডটি আপডেট ডেটাবেসে ইতিমধ্যে রয়েছে মডেলগুলির। আপডেট মডেল আপডেট করতে, আপনাকে প্রথমে আবার পুনরুদ্ধার করতে হবে, আপডেটের মান সেট করতে হবে, এবং তারপরে সেভ মেথডটি কল করতে হবে। একইভাবে, updated_at স্থগিতিও স্বয়ংক্রিয়ভাবে আপডেট হবে, তাই ম্যানুয়ালি মান প্রয়োজন নেই:
```php
$user = app\model\User::find(1);
$user->name = 'jerry';
$user->save();
```

## ব্যাচ আপডেট
```php
app\model\User::where('uid', '>', 10)
          ->update(['name' => 'tom']);
```

## মান পরিবর্তন পরীক্ষা
Eloquent মডেলে isDirty, isClean এবং wasChanged মেথড সরবরাহ করে, যাতে মডেলের আভ্যন্তরিক অবস্থা পরীক্ষা করা এবং তা প্রাথমিক লোডিং থেকে কীভাবে পরিবর্তিত হয়েছে তা নির্ধারণ করা যায়।
isDirty মেথডটি মডেলে লোডিংের পর যদি কোনও মান পরিবর্তন হয়েছে তাহলে এটি লোডিংের পর পরীক্ষা করে। আপনি বিশেষভাবে একটি নির্দিষ্ট মান নির্ধারণ করতে পারেন যেখানে দেখা যাবে কোনও বিশেষ মান পরিবর্তন হয়েছে। isClean মেথড isDirty এর বিপরীত, এটি ছবিটি পেতে পারে যেহেতু এমন কোনও মান নেই:
```php
$user = User::create([
    'first_name' => 'Taylor',
    'last_name' => 'Otwell',
    'title' => 'Developer',
]);

$user->title = 'Painter';

$user->isDirty(); // true
$user->isDirty('title'); // true
$user->isDirty('first_name'); // false

$user->isClean(); // false
$user->isClean('title'); // false
$user->isClean('first_name'); // true

$user->save();

$user->isDirty(); // false
$user->isClean(); // true
```
wasChanged মেথড দৈনিক অনুরোধ চক্রের মৌলিক সময়কালে সর্বশেষবার সংরক্ষিত মডেলটি আপডেট হয়েছে না সে কীভাবে জানবে। পরিবর্তন করা নির্দিষ্ট মান দেখান যেমন:
```php
$user = User::create([
    'first_name' => 'Taylor',
    'last_name' => 'Otwell',
    'title' => 'Developer',
]);

$user->title = 'Painter';
$user->save();

$user->wasChanged(); // true
$user->wasChanged('title'); // true
$user->wasChanged('first_name'); // false
```

## ব্যাচ মান অর্পিত
আপনি সহজেই create মেথড ব্যবহার করে নতুন মডেল সংরক্ষণ করতে পারেন। এই পদক্ষেপটি মডেল ইন্সট্যান্স ফেরত দেয়। তবে, আপনার নির্দেশ সম্পর্কে ইচ্ছুক মডেলে পূর্বনির্ধারিত বা লোক্যাপ বৈশিষ্ট্য সেট করা আবশ্যক কারণ সমস্ত Eloquent মডেল পূর্বনির্ধারিত ভূমিকায় ব্যাচ মান প্রয়োজন করা হয়:
```php
<?php

namespace app\model;

use support\Model;

class Flight extends Model
{
    /**
     * ব্যাচ মান অর্জন করা যাবার গুণ
     *
     * @var array
     */
    protected $fillable = ['name'];
}
```
আপনি একবার যদি আপনার মডেলের জন্য ব্যাচ মান সেট করেন, তখন আপনি create পদক্ষেপটির মাধ্যমে ডেটাবেসে নতুন ডেটা প্রবেশ করার আগে মডেলের উপর নির্দিষ্ট করতে হবে। create পদক্ষেপটি মডেল ইন্সট্যান্স ফেরত দেয়:
```php
$flight = app\model\Flight::create(['name' => 'Flight 10']);
```
আপনার যদি ইতিমধ্যে মডেল ইনস্ট্যান্স থাকে তবে আপনি fill মেথডে একটি এরে পাঠায়বেন যাতে মান অর্পিত করা যায়:
```php
$flight->fill(['name' => 'Flight 22']);
```
$fillable দেখা যায় একটি ব্যাচ মানের "সফেদ তালিকা" হিসেবে, আপনি এবং $guarded বৈশিষ্ট্য ব্যবহার করতে পারেন। $guarded বৈশিষ্ট্য অনুসরণ করো যা প্রতিষ্ঠিত মানের "কালো তালিকা"। লক্ষ্য করুন: $fillable এবং $guarded মধ্যে ভূল যোগাযোগ করা যায় না, একই সাথে ব্যবহার করা সম্ভব না। নীচের এই উদাহরণটি অনুসরণ করুন, price বৈশিষ্ট্যের বাইরে সব বৈশিষ্ট্য ব্যাচ মান অর্পণ করা যাবে:
```php
<?php

namespace app\model;

use support\Model;

class Flight extends Model
{
    /**
     * ব্যাচ মান অর্জন করা যাবার গুণ
     *
     * @var array
     */
    protected $guarded = ['price'];
}
```
আপনি যদি সব গুণ ব্যাচ মান অর্পণ করতে চান তবে আপনি $guarded বৈশিষ্ট্যকে একটি ফাঁকা এরে হিসেবে সেট করে দিতে পারেন:
```php
/**
 * বাচ মান অর্জন করা যাবার গুণ
 *
 * @var array
 */
protected $guarded = [];
```

## অন্যান্য সৃষ্টির পদক্ষেপ
firstOrCreate/ firstOrNew
এখানে অনুবর্তী ঘোষণা করা কোনও দুইটি পদক্ষেপ রয়েছে: firstOrCreate এবং firstOrNew। firstOrCreate পদক্ষেপটি ডেটাবেসে ডেটাবেসে ডেটা মান দেওয়ার জন্য দেয়া আসা মূল্য শুধুমাত্র তালিকা স্ক্রীনের মাধ্যমে এন্ট্রি মিলবার জন্য ডেটাবেসে মিলবে।

firstOrNew পদক্ষেপটিও firstOrCreate পদক্ষেপের মতোই ডাটাবেসে ডেটা মান নিয়ে দেখবে কিন্তু, যদি সে কোনও মডেল এইম থাকে তাহলে একটি নতুন মডেল ইন্সট্যান্স ফিরিয়ে দেবে। মনে রাখবেন
