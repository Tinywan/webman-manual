# Безопасность

## Пользователь запуска
Рекомендуется установить пользователя запуска с более низкими правами, например, с тем же пользователем, под которым работает nginx. Пользователь запуска устанавливается в `config/server.php` в `user` и `group`. Аналогично, пользователь для настраиваемых процессов указывается в `config/process.php` в `user` и `group`. Следует отметить, что процесс монитора не должен иметь пользователя запуска, так как для него требуются повышенные права для нормальной работы.

## Стандарт контроллеров
В директории `controller` или ее поддиректориях должны находиться только файлы контроллеров, запрещено помещать в нее другие типы файлов, в противном случае, при включенной [постфиксе контроллера](https://www.workerman.net/doc/webman/controller.html#%E6%8E%A7%E5%88%B6%E5%99%A8%E5%90%8E%E7%BC%80), файлы классов могут быть незаконно доступны по URL, что может привести к непредсказуемым последствиям. Например, файл `app/controller/model/User.php` на самом деле является классом модели, но ошибочно помещен в директорию `controller`, и при отсутствии [постфикса контроллера](https://www.workerman.net/doc/webman/controller.html#%E6%8E%A7%E5%88%B6%E5%99%A8%E5%90%8E%E7%BC%80), пользователи смогут обращаться к произвольным методам `User.php` по адресу `/model/user/xxx`. Чтобы окончательно исключить эту ситуацию, настоятельно рекомендуется использовать [постфикс контроллера](https://www.workerman.net/doc/webman/controller.html#%E6%8E%A7%E5%88%B6%E5%99%A8%E5%90%8E%E7%BC%80), чтобы явно указать, какие файлы являются файлами контроллеров.

## Фильтрация XSS
Из соображений общности, webman не выполняет XSS-экранирование запросов. Webman настоятельно рекомендует осуществлять экранирование XSS при рендеринге, а не перед вставкой в базу данных. Кроме того, шаблоны twig, blade, think-template и т. д. автоматически выполняют экранирование XSS, не требуя ручного экранирования, что очень удобно.

> **Подсказка**
> Если вы выполните экранирование XSS перед вставкой в базу данных, это может привести к проблемам несовместимости с некоторыми плагинами приложений.

## Предотвращение SQL-инъекций
Для предотвращения SQL-инъекций рекомендуется по возможности использовать ORM, такие как [illuminate/database](https://www.workerman.net/doc/webman/db/tutorial.html) или [think-orm](https://www.workerman.net/doc/webman/db/thinkorm.html), и по возможности избегать сборки SQL самостоятельно.

## Проксирование nginx
Если ваше приложение должно быть доступно для внешних пользователей, настоятельно рекомендуется добавить перед webman прокси-сервер nginx, таким образом можно фильтровать некорректные HTTP-запросы и повысить безопасность. Подробнее см. [nginx-проксирование](nginx-proxy.md).
