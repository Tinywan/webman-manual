# Стандарт разработки приложений-плагинов

## Требования к приложениям-плагинам
* Плагины не могут содержать код, иконки, изображения и т. д., нарушающие авторские права
* Исходный код плагина должен быть полным и не может быть зашифрован
* Плагин должен предоставлять полноценный функционал, а не представлять из себя простые функции
* Должно быть предоставлено полное описание функционала и документация
* Плагин не должен содержать дочерних рынков
* В плагине не должно быть никакого текста или рекламных ссылок

## Идентификация приложений-плагинов
У каждого приложения-плагина есть уникальная метка, состоящая из букв. Эта метка влияет на название каталога исходного кода плагина, пространство имен классов плагина и префикс таблиц базы данных для плагина.

Предположим, у разработчика есть метка "foo" для плагина. Тогда исходный код плагина будет находиться в `{основной_проект}/plugin/foo`, соответствующее пространство имен плагина будет `plugin\foo`, а префикс таблиц в базе данных будет `foo_`.

Поскольку метка уникальна во всем Интернете, разработчику перед началом разработки необходимо проверить, доступна ли метка, по адресу [Проверка метки приложения](https://www.workerman.net/app/check).

## База данных
* Названия таблиц должны состоять из символов в нижнем регистре `a-z` и подчеркивания `_`
* Таблицы данных плагина должны иметь префикс, соответствующий метке плагина. Например, таблица article плагина "foo" будет иметь имя `foo_article`
* Первичным ключом таблицы должен быть индекс id
* Для хранения данных следует использовать движок innodb
* Для кодировки символов следует использовать utf8mb4_general_ci
* Для ORM базы данных можно использовать laravel или think-orm
* Рекомендуется использовать поле времени DateTime

## Стиль кода

#### Соответствие стандарту PSR4
Код должен соответствовать стандарту загрузки PSR4

#### Названия классов следует писать в стиле верблюжьей нотации с заглавной буквы
```php
<?php

namespace plugin\foo\app\controller;

class ArticleController
{
    
}
```

#### Атрибуты класса и методы следует называть в стиле верблюжьей нотации со строчной буквы
```php
<?php

namespace plugin\foo\app\controller;

class ArticleController
{
    /**
     * Метод, не требующий аутентификации
     * @var array
     */
    protected $noNeedAuth = ['getComments'];
    
    /**
     * Получить комментарии
     * @param Request $request
     * @return Response
     * @throws BusinessException
     */
    public function getComments(Request $request): Response
    {
        
    }
}
```

#### Комментарии
Атрибуты класса и функции должны содержать комментарии, включая краткое описание, параметры и тип возврата

#### Отступы
Отступы в коде должны делаться с помощью 4 пробелов, а не табуляции

#### Управление потоком
После ключевых слов управления потоком (if, for, while, foreach и т. д.) следует пробел, и фигурные скобки управляющего кода должны быть на одной строке с закрывающей круглой скобкой.
```php
foreach ($users as $uid => $user) {

}
```

#### Имена временных переменных
Рекомендуется называть переменные в стиле верблюжьей нотации, начиная с маленькой буквы (необязательно)

```php
$articleCount = 100;
```
