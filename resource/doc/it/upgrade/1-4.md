# Guida all'Aggiornamento 1.4

**Prima di eseguire l'aggiornamento, assicurati di fare il backup e esegui i seguenti comandi per l'aggiornamento**
`composer require workerman/webman-framework ^1.4.7 && composer require webman/console ^1.2.12 && php webman install`

> **Nota**
> Se non riesci ad aggiornare, potrebbe essere a causa dell'uso di un proxy di composer, si prega di utilizzare il seguente comando `composer config -g --unset repos.packagist` per ripristinare l'uso della fonte dati ufficiale di composer

# Funzionalità e Cambiamenti

## Plugin dell'Applicazione
La versione 1.4 supporta i plugin dell'applicazione, per ulteriori informazioni si prega di fare riferimento a [Plugin dell'Applicazione](../plugin/app.md)

## Routing Automatico
La versione 1.4 supporta diverse regole complesse per le directory dei controller, ad esempio
```
app
├── admin
│   └── v1
│       └── v2
│           └── v3
│               └── controller
│                   └── Index.php
└── controller
    ├── v1
    │   └── Index.php
    └── v2
        └── v3
            └── Index.php
```
In breve, il plugin `webman/auto-route` non è più necessario.

## Abilitazione del Riutilizzo del Controller
La versione 1.4 consente di disabilitare il riutilizzo del controller, impostando `'controller_reuse' => false,` in `config/app.php`. In questo modo, ogni richiesta inizierà un nuovo controller, il che significa che ogni richiesta attiverà il costruttore `__construct()` corrispondente del controller. I programmatori possono eseguire un'initiale lavorazione per ogni richiesta nel costruttore.

Poiché è possibile disabilitare il riutilizzo del controller, il plugin `webman/action-hook` non è più necessario.

## Avvio del Servizio HTTP
La versione 1.4 supporta l'avvio di più porte per fornire servizi HTTP. Per ulteriori dettagli, consulta [Gestione delle Attività Lente](../others/task.md)

## Configurazione dei File di Visualizzazione
L'estensione può essere configurata solo nelle opzioni di view.php.
**Modo non più supportato**
```php
use support\view\Raw;
return [
    'handler' => Raw::class,
    'view_suffix' => '.php'
];
```
**Modo corretto**
```php
use support\view\Raw;
return [
    'handler' => Raw::class,
    'options' => [
        'view_suffix' => '.php'
    ]
];
```

## Cambiamento del Namespace del Driver di Sessione
A partire da 1.4.0, webman ha modificato il namespace della classe `SessionHandler`, da
```php
use Webman\FileSessionHandler;  
use Webman\RedisSessionHandler;  
use Webman\RedisClusterSessionHandler;  
```
a
```php
use Webman\Session\FileSessionHandler;  
use Webman\Session\RedisSessionHandler;  
use Webman\Session\RedisClusterSessionHandler;
```

Per evitare errori diretti dopo l'aggiornamento, la classe `Webman\FileSessionHandler` sarà mantenuta per un po' di tempo e verrà rimossa completamente in future versioni.

Questa modifica influisce sulla configurazione `'handler'` di `config/session.php`.
