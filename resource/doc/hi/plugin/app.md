# ऐप प्लगइन
प्रत्येक ऐप प्लगइन एक पूर्ण ऐप है, सोर्स कोड `{मुख्य परियोजना}/प्लगइन` निचे रखा गया है।

> **स्पष्टीकरण**
> `php webman app-plugin:create {प्लगइन_नाम}` का उपयोग करके आप स्थानीय रूप में एक ऐप प्लगइन बना सकते हैं, 
> उदाहरण के लिए `php webman app-plugin:create cms` कमांड के द्वारा निम्नलिखित डायरेक्टरी संरचना बनाएगा

```
प्लगइन/
└── cms
    ├── app
    │   ├── controller
    │   │   └── IndexController.php
    │   ├── exception
    │   │   └── Handler.php
    │   ├── functions.php
    │   ├── middleware
    │   ├── model
    │   └── view
    │       └── index
    │           └── index.html
    ├── config
    │   ├── app.php
    │   ├── autoload.php
    │   ├── container.php
    │   ├── database.php
    │   ├── exception.php
    │   ├── log.php
    │   ├── middleware.php
    │   ├── process.php
    │   ├── redis.php
    │   ├── route.php
    │   ├── static.php
    │   ├── thinkorm.php
    │   ├── translation.php
    │   └── view.php
    └── public
```

हमें दिखाई दे रहा है कि एक ऐप प्लगइन मे वेबमैन की समान निर्देशिका संरचना और कॉन्फ़िग फ़ाइलें है। वास्तव में एक ऐप प्लगइन विकास एक वेबमैन परियोजना का विकास के अनुभव के बराबर होता है, केवल कुछ बिंदुओं पर ध्यान देना होता है।

## नेमस्पेस
प्लगइन निर्देशिका और नेमस्पेस PSR4 नियमों का पालन करता है, क्योंकि प्लगइन सभी `प्लगइन` निर्देशिका के अंतर्गत रखे गए हैं, इसलिए नेमस्पेस `plugin` से शुरू होते हैं, उदाहरण के लिए, `plugin\cms\app\controller\UserController` यहाँ cms प्लगइन का सोर्स कोड मुख्य निर्देशिका है।

## URL पहुंच
ऐप प्लगइन URL पते का पथ `/app` से शुरू होता है, उदाहरण के लिए  `plugin\cms\app\controller\UserController` URL पता है `http://127.0.0.1:8787/app/cms/user`।

## स्थिर फ़ाइलें
स्थिर फ़ाइलें `plugin/{प्लगइन}/public` निचे रखी जाती है, उदाहरण के लिए `http://127.0.0.1:8787/app/cms/avatar.png` कोई वास्तविक रूप से`plugin/cms/public/avatar.png` फ़ाइल को प्राप्त करती हैं।

## कॉन्फ़िग फ़ाइलें
प्लगइन का कॉन्फिग मामूली वेबमैन परियोजना की तरह है, लेकिन प्लगइन का कॉन्फ़िग आम तौर पर केवल वर्तमान प्लगइन के लिए होता है, मुख्य परियोजना पर अक्सर कोई प्रभाव नहीं डालता है।
उदाहरण के लिए`plugin.cms.app.controller_suffix` की मान केवल प्लगइन के कंट्रोलर सफ़िक्स पर प्रभाव डालती है, मुख्य परियोजना को नहीं।
उदाहरण के लिए `plugin.cms.app.controller_reuse` की मान केवल प्लगइन के लिए कंट्रोलर पुन: प्रयोग हो करती है, मुख्य परियोजना को नहीं।
उदाहरण के लिए , `plugin.cms.middleware` की मान केवल प्लगइन में कार्यकारी करती है, मुख्य परियोजना को नहीं।
उदाहरण के लिए, `plugin.cms.view` की मान  केवल प्लगइन द्वारा उपयोग की जाने वाली दृश्य, मुख्य परियोजना को नहीं।
उदाहरण के लिए, `plugin.cms.container` की मान केवल प्लगइन द्वारा उपयोग किया जाने वाला कंटेनर, मुख्य परियोजना को नहीं।
उदाहरण के लिए `plugin.cms.exception` की मान केवल प्लगइन के असामान्यपद क्लास का प्रभाव डलती है, मुख्य परियोजना को नहीं।
लेकिन, क्योंकी रूटिंग विश्वसनीय है, इसलिए प्लगइन कॉन्फ़िग का रूट भी समग्र में प्रभावित करता है।

## कॉन्फ़िग प्राप्त करें
किसी प्लगइन की कॉन्फ़िग प्राप्त करने का तरीका है `config('plugin.{प्लगइन}.{निर्दिष्ट कॉन्फ़िग}');`, उदाहरण के लिए `config('plugin.cms.app')`
उसी तरह से, मुख्य परियोजना या किसी अन्य प्लगइन को `config('plugin.cms.xxx')` का उपयोग करके cms प्लगइन की कॉन्फ़िग प्राप्त कर सकता है।

## समर्थित नहीं होने वाली कॉन्फ़िग 
ऐप प्लगइन सर्वर.php, सत्र.php कॉन्फ़िग को समर्थन नहीं करते हैं, `app.request_class`, `app.public_path`, `app.runtime_path` कॉन्फ़िग भी समर्थित नहीं हैं।

## डेटाबेस
प्लगइन अपनी डेटाबेस कॉन्फ़िगर कर सकते हैं, उदाहरण के लिए `plugin/cms/config/database.php` का सामग्री निम्नलिखित है
```php
return  [
    'default' => 'mysql',
    'connections' => [
        'mysql' => [ 
            'driver'      => 'mysql',
            'host'        => '127.0.0.1',
            'port'        => 3306,
            'database'    => 'डेटाबेस',
            'username'    => 'उपयोगकर्ता नाम',
            'password'    => 'पासवर्ड',
            'charset'     => 'utf8mb4',
            'collation'   => 'utf8mb4_general_ci',
        ],
        'admin' => [ 
            'driver'      => 'mysql',
            'host'        => '127.0.0.1',
            'port'        => 3306,
            'database'    => 'डेटाबेस',
            'username'    => 'उपयोगकर्ता नाम',
            'password'    => 'पासवर्ड',
            'charset'     => 'utf8mb4',
            'collation'   => 'utf8mb4_general_ci',
        ],
    ],
];
```
इसका उपयोग करने का तरीका `Db::connection('plugin.{प्लगइन}.{कनेक्शन_नाम}');` है, उदाहरण के लिए
```php
use support\Db;
Db::connection('plugin.cms.mysql')->table('user')->first();
Db::connection('plugin.cms.admin')->table('admin')->first();
```

यदि आप मुख्य परियोजना के डेटाबेस का उपयोग करना चाहते हैं, तो सीधे उपयोग कर सकते हैं, उदाहरण के लिए
```php
use support\Db;
Db::table('user')->first();
// मान लें कि मुख्य परियोजना ने एक ऐडमिन कनेक्शन भी कॉन्फ़िगर किया है
Db::connection('admin')->table('admin')->first();
```

> **स्पष्टीकरण**
> थिंकओर्म भी इसी तरह का इस्तेमाल करता है

## रेडिस
रेडिस का इस्तेमाल भी डेटाबेस के इस्तेमाल की तरह ही होता है, उदाहरण के लिए `plugin/cms/config/redis.php`
```php
return [
    'default' => [
        'host' => '127.0.0.1',
        'password' => null,
        'port' => 6379,
        'database' => 0,
    ],
    'cache' => [
        'host' => '127.0.0.1',
        'password' => null,
        'port' => 6379,
        'database' => 1,
    ],
];
```
इसका उपयोग करने का तरीका
```php
use support\Redis;
Redis::connection('plugin.cms.default')->get('key');
Redis::connection('plugin.cms.cache')->get('key');
```

उसी तरह से, यदि आप मुख्य परियोजना की रेडिस कॉन्फ़िगरेशन का इस्तेमाल करना चाहते हैं
```php
use support\Redis;
Redis::get('key');
// मान लें कि मुख्य परियोजना ने खोजें कनेक्शन को भी कॉन्फ़िगर किया है
Redis::connection('cache')->get('key');
```

## लॉग
लॉग प्रकार का उपयोग डेटाबेस के उपयोग की तरह ही आता है
```php
use support\Log;
Log::channel('plugin.admin.default')->info('test');
```

यदि आप मुख्य परियोजना की लॉग कॉन्फ़िगरेशन का उपयोग करना चाहते हैं, तो सीधे उपयोग कर सकते हैं
```php
use support\Log;
Log::info('विवरण');
// मान लें कि मुख्य परियोजना के लिए एक टेस्ट लॉग प्रकार की भी कॉन्फ़िगर किया गया है
Log::channel('test')->info('विवरण');
```

# ऐप प्लगइन की स्थापना और हटाएँ
ऐप प्लगइन की स्थापना के केवल `plugin` निर्देशिका के अंतर्गत प्लगइन डायरेक्टरी को कॉपी करने की जरूरत होती है, इसकी प्रभावी बनाने के लिए reload या restart की आवश्यक
