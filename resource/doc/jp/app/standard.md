# アプリケーションプラグイン開発規約

## アプリケーションプラグイン要件
- プラグインには著作権侵害のコード、アイコン、画像などが含まれてはならない
- プラグインソースコードは完全なものであり、暗号化してはならない
- プラグインは完全な機能を持たなければならず、単純な機能であってはならない
- 完全な機能の紹介や文書を提供しなければならない
- プラグインにはサブマーケットを含めてはならない
- プラグイン内には広告テキストやプロモーションリンクを含めてはならない

## アプリケーションプラグイン識別子
それぞれのアプリケーションプラグインには、文字で構成されるユニークな識別子があります。この識別子は、アプリケーションプラグインのソースコードディレクトリ名、クラスの名前空間、プラグインのデータベーステーブルの接頭辞に影響を与えます。

例えば、開発者が"foo"をプラグインの識別子とする場合、プラグインのソースコードは`{main_project}/plugin/foo`にあり、対応するプラグインの名前空間は`plugin\foo`で、テーブルの接頭辞は`foo_`になります。

この識別子はグローバルに一意であるため、開発者は開発を始める前に使用可能な識別子をチェックする必要があります。チェックする場所は[アプリケーション識別子チェック](https://www.workerman.net/app/check)です。

## データベース
- テーブル名は小文字の`a-z`およびアンダースコア`_`で構成される
- プラグインのデータテーブルはプラグイン識別子を接頭辞として付けるべきです。例えば、"foo"プラグインの記事テーブルは`foo_article`となります
- テーブルの主キーはidであるべきです
- 全てのストレージエンジンはInnoDBエンジンを使用する
- 文字セットはutf8mb4_general_ciを統一して使用する
- データベースORMにはLaravelまたはThinkORMが使用できる
- 時間フィールドにはDateTimeを使用することを推奨します

## コーディング規約

#### PSR規約
コードはPSR4の読み込み規則に従うべきです

#### クラス名は大文字で始まるキャメルケース
```php
<?php

namespace plugin\foo\app\controller;

class ArticleController
{
    
}
```

#### プロパティとメソッドは小文字で始まるキャメルケース
```php
<?php

namespace plugin\foo\app\controller;

class ArticleController
{
    /**
     * 認証が不要なメソッド
     * @var array
     */
    protected $noNeedAuth = ['getComments'];
    
    /**
     * コメントを取得
     * @param Request $request
     * @return Response
     * @throws BusinessException
     */
    public function getComments(Request $request): Response
    {
        
    }
}
```

#### コメント
クラスのプロパティとメソッドには、概要、パラメータ、戻り値の型を含める必要があります

#### インデント
コードはタブではなくスペース4つでインデントするべきです

#### フロー制御
フロー制御キーワード（if、for、while、foreachなど）の後にスペースが続き、フロー制御のコードの始まりの中括弧は終わりの丸括弧と同じ行に配置する必要があります
```php
foreach ($users as $uid => $user) {

}
```

#### 一時変数名
小文字で始まるキャメルケースが推奨されます（強制ではありません）

```php
$articleCount = 100;
```
