# มติการพัฒนาปลั๊กอินแอปพลิเคชัน

## ข้อกำหนดสำหรับปลั๊กอินแอปพลิเคชัน
* ปลั๊กอินไม่สามารถมีโค้ดที่ละเมิดลิขสิทธิ์ ไอคอน รูปภาพ หรืออื่นๆ
* โค้ดต้นฉบับของปลั๊กอินต้องเป็นโค้ดที่สมบูรณ์แบบ และไม่สามารถถูกเข้ารหัส
* ปลั๊กอินต้องมีฟังก์ชันที่สมบูรณ์แบบ และไม่ใช่เพียงแค่ฟังก์ชันที่ง่ายๆ
* ต้องมีข้อมูลเกี่ยวกับฟังก์ชันสมบูรณ์และเอกสาร
* ปลั๊กอินไม่สามารถมีโมดูลย่อย
* ไม่สามารถมีข้อความหรือลิงก์โปรโมทภายในปลั๊กอิน

## การระบุปลั๊กอินแอปพลิเคชัน
แต่ละปลั๊กอินแอปพลิเคชันมีการระบุเฉพาะโดยต้องมีตัวระบุที่เป็นค่าพิเศษ และตัวระบุนี้ประกอบด้วยอักษร ซึ่งจะมีผลต่อหัวเรื่องไดเร็กทอรี่รหัสโปรแกรมหลัก ชื่อโดเมนสเปฉพาะของคลาส และนำหน้าตารางฐานข้อมูลปลั๊กอิน

ถ้าผู้พัฒนาใช้ "foo" เป็นตัวระบุของปลั๊กอิน แล้วโค้ดของปลั๊กอินที่ตั้งอยู่ในไดเร็กทอรี่หลักคือ `{โปรเจคหลัก}/plugin/foo` หรือสเปฉพาะของคลาสคือ `plugin\foo` และเตารางล่วงหน้าจะเป็น `foo_` 

เนื่องจากตัวระบุเป็นที่จอง ผู้พัฒนาจำเป็นต้องทำการตรวจสอบด้วยตัวเองก่อนที่จะเริ่มพัฒนา โดยสามารถตรวจสอบได้ที่[การตรวจสอบตัวระบุแอปพลิเคชัน](https://www.workerman.net/app/check) 

## ฐานข้อมูล
* ชื่อตารางจะประกอบด้วยตัวอักษรเล็ก a-z และเครื่องหมาย underscore `_`
* ตารางข้อมูลของปลั๊กอินควรตั้งด้วยนำหน้าตัวระบุของปลั๊กอิน เช่น ตาราง article ของปลั๊กอิน foo จะมีชื่อว่า `foo_article`
* คีย์หลักของตารางควรเป็น id
* การจัดเก็บข้อมูลควรใช้เอ็นจิน innodb เท่านั้น
* การเซตค่าชุดอักขระควรใช้ utf8mb4_general_ci เท่านั้น
* การจัดการฐานข้อมูล ORM ควรใช้ laravel หรือ think-orm
* คำแนะนำ ควรใช้ DateTime เป็นฟิลด์เวลา

## มาตรฐานของโค้ด

#### มาตรฐาน PSR
โค้ดควรเป็นไปตามมาตรฐาน PSR4 ในการโหลด

#### การตั้งชื่อสำหรับคลาสที่เป็นรูปแบบแค่พิมพ์ใหญ่เริ่มต้น
```php
<?php

namespace plugin\foo\app\controller;

class ArticleController
{
    
}
```

#### ตั้งชื่อสำหรับแอททริบิวและเมธอดเป็นรูปแบบด้วยตัวเล็กเริ่มต้นและใช้รูปแบบแค่พิมพ์ใหญ่
```php
<?php

namespace plugin\foo\app\controller;

class ArticleController
{
    /**
     * คำสั่งที่ไม่ต้องการการตรวจสอบสิทธิ์
     * @var array
     */
    protected $noNeedAuth = ['getComments'];
    
    /**
     * รับความเห็น
     * @param Request $request
     * @return Response
     * @throws BusinessException
     */
    public function getComments(Request $request): Response
    {
        
    }
}
```

#### คอมเม้น
คอมเม้นสำหรับแอททริบิวและฟังก์ชันควรมีคำอธิบาย พารามิเตอร์ และประเภทการรับค่ากลับ

#### การเยื้อง
โค้ดควรใช้เว้นวรรค 4 ช่อง และไม่ใช้แท๊บ

#### การควบคุมการสัญญาณ
คำสั่งควบคุมการสัญญาณ (if for while foreach เป็นต้น) ควรเป็นไปตามหลังการเว้นวรรค และเว้นวรรคของการเริ่มต้นของจุดปีนวงเล็บควรอยู่บรรทัดเดียวกับจุดสิ้นสุดของวงเล็บ สำหรับ例: 
```php
foreach ($users as $uid => $user) {

}
```

#### การตั้งชื่อตัวแปรชั่วคราว
แนะนำให้ตั้งชื่อตัวแปรชั่วคราวในรูปแบบตัวเล็กเริ่มต้นและใช้รูปแบบด้วยตัวเล็กเริ่มต้นและใช้รูปแบบแค่พิมพ์ใหญ่

```php
$articleCount = 100;
```
