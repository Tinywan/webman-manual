# ความปลอดภัย

## ผู้ใช้ที่ทำงาน
แนะนำให้ตั้งผู้ใช้ที่ทำงานให้มีสิทธิ์ต่ำ เช่นเดียวกับผู้ใช้ที่ nginx ทำงาน ผู้ใช้ที่ทำงานถูกตั้งค่าใน `config/server.php` ใน `user` และ `group` รวมถึงการกำหนดผู้ใช้ที่เซิฟเวอร์ที่กำหนดไว้ใน `config/process.php` ด้วย
ควรระวังไว้ว่าไม่ควรตั้งค่าให้ monitor ทำงานด้วยผู้ใช้ที่ทำงานเพราะต้องการสิทธิ์สูงเพื่อให้ทำงานได้อย่างถูกต้อง

## หลักการควบคุม
`controller` หรือไดเรกทอรีย่อยๆ สามารถเก็บไฟล์ควบคุมได้เท่านั้น ไม่อนุญาตให้มีไฟล์คลาสอื่น ๆ โปรแกรมย่อยๆ หากไม่ได้เปิดใช้งาน[โทเค็นคอนโทรลเลอร์](https://www.workerman.net/doc/webman/controller.html#%E6%8E%A7%E5%88%B6%E5%99%A8%E5%90%8E%E7%BC%80) ไฟล์คลาสอาจจะถูกเข้าถึงผ่าน URL ที่ไม่ถูกต้อง ซึ่งอาจเกิดผลไม่คาดคิด
ตัวอย่างเช่น `app/controller/model/User.php` จริง ๆ แล้วเป็นคลาส Model แต่ถูกเก็บไว้ในไดเรกทอรี `controller` เมื่อไม่ได้เปิดใช้งาน[โทเค็นคอนโทรลเลอร์](https://www.workerman.net/doc/webman/controller.html#%E6%8E%A7%E5%88%B6%E5%99%A8%E5%90%8E%E7%BC%80) ผู้ใช้สามารถเข้าถึงเมทอดใด ๆ ในไฟล์ `User.php` ผ่าน URL เช่น `/model/user/xxx`
เพื่อป้องกันอันนี้อย่างสมบูรณ์แบบ แนะนำให้ใช้[โทเค็นคอนโทรลเลอร์](https://www.workerman.net/doc/webman/controller.html#%E6%8E%A7%E5%88%B6%E5%99%A8%E5%90%8E%E7%BC%80)เพื่อแสดงว่าไฟล์คอนโทรลเลอร์แบบไหน

## การกรอง XSS
เนื่องจากความสามารถในการใช้ทั่วไป  webman ไม่เติมการกรอก XSS ในคำขอ
webman แนะนำให้ใช้การกรอง XSS ระหว่างการแสดงผล และไม่ใช้การกรองก่อนเข้าฐานข้อมูล
และ Twig、Blade、think-tmplate หรือเทมเพลตอื่นๆ จะทำการกรอง XSS อัตโนมัติ ไม่จำเป็นต้องกรองด้วยตัวเอง สะดวกมาก

> **คำแนะนำ**
> หากท่านกรอง XSS ก่อนเข้าฐานข้อมูล อาจทำให้มีปัญหาไม่สามารถใช้ปลั๊กอินโปรแกรมได้อย่างเหมาะสม

## ป้องกันการฉีดรหัส SQL
เพื่อป้องกันการฉีดรหัส SQL กรุณาใช้ ORM เท่าที่จะเป็นไปได้ เช่น [illuminate/database](https://www.workerman.net/doc/webman/db/tutorial.html) หรือ [think-orm](https://www.workerman.net/doc/webman/db/thinkorm.html) โดยหลียใหสำหรับประมวลผลเองไม่ทำการประมวลผลรหัส SQL ด้วยตัวเอง

## ระบบพร็อกซี่ nginx
เมื่อแอปพลิเคชันของท่านต้องการให้ผู้ใช้ภายนอกเข้าถึง แนะนำให้เพิ่มพร็อกซี่ nginx ไว้ข้างหน้า webman จะช่วยกรองคำขอ HTTP ที่ไม่ถูกกฎหมายได้  พัฒนาความปลอดภัย
สำหรับรายละเอียดอื่น ๆ กรุณาดูที่[พร็อกซี่ nginx](nginx-proxy.md)
