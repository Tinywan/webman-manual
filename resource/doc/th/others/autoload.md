# การโหลดอัตโนมัติ

## โหลดไฟล์ตามระเบียบ PSR-0 ด้วย composer
webman ปฏิบัติตามระเบียบการโหลดอัตโนมัติ `PSR-4` หากธุรกิจของคุณต้องการโหลดไฟล์ตามระเบียบ `PSR-0` โปรดดูวิธีดังต่อไปนี้

- สร้างไดเรกทอรี `extend` เพื่อเก็บไฟล์ตามระเบียบ `PSR-0`
- แก้ไข `composer.json` ในส่วน `autoload` เพิ่มเนื้อหาต่อไปนี้

```js
"psr-0" : {
    "": "extend/"
}
```
ตัวอย่างของผลลัพธ์
![](../../assets/img/psr0.png)

- รันคำสั่ง `composer dumpautoload`
- รันคำสั่ง `php start.php restart` เพื่อรีสตาร์ท webman (โปรดทราบว่าต้องรีสตาร์ทใหม่เพื่อให้มันเป็นผล)

## โหลดไฟล์ที่เฉพาะเจาะจงด้วย composer

- แก้ไข `composer.json` ในส่วน `autoload.files` เพิ่มไฟล์ที่ต้องการโหลด
```
"files": [
    "./support/helpers.php",
    "./app/helpers.php"
]
```

- รันคำสั่ง `composer dumpautoload`
- รันคำสั่ง `php start.php restart` เพื่อรีสตาร์ท webman (โปรดทราบว่าต้องรีสตาร์ทใหม่เพื่อให้มันเป็นผล)

> **คำแนะนำ**
> ไฟล์ที่กำหนดใน `autoload.files` ใน `composer.json` จะถูกโหลดก่อนที่ webman จะเริ่มต้น ซึ่งไฟล์ที่โหลดโดยการกำหนดใน `config/autoload.php` ของกรอบทำงานจะโหลดหลังจากเริ่มต้น webman ไฟล์ที่ถูกโหลดโดย `autoload.files` ใน `composer.json` หลังจากการเปลี่ยนแปลงจะต้องรีสตาร์ทเพื่อให้มีผล การรีโหลดจึงไม่มีผล ในขณะที่การโหลดไฟล์โดยการกำหนดใน `config/autoload.php` ของกรอบทำงานรองรับการโหลดแบบถูกแบบเสร็จหลังการเปลี่ยนแปลง การรีโหลดทำให้มันมีผล

## โหลดไฟล์ที่เฉพาะเจาะจงด้วยกรอบทำงาน
บางไฟล์อาจไม่เป็นไปตามระเบียบ SPR และไม่สามารถโหลดโดยอัตโนมัติได้ เราสามารถโหลดไฟล์เหล่านี้ผ่านการกำหนดค่า `config/autoload.php` ดังตัวอย่าง

```php
return [
    'files' => [
        base_path() . '/app/functions.php',
        base_path() . '/support/Request.php', 
        base_path() . '/support/Response.php',
    ]
];
```
 > **คำแนะนำ**
 > เราเห็นว่า `autoload.php` ถูกตั้งค่าให้โหลดไฟล์ `support/Request.php` และ `support/Response.php` นั่นเป็นเพราะใน `vendor/workerman/webman-framework/src/support/` ยังมีไฟล์ที่เหมือนกัน โดยการกำหนด `autoload.php` ทำให้โหลดไฟล์ `support/Request.php` และ `support/Response.php` จากไดเรกทอรีรากของโปรเจกต์ ซึ่งสามารถช่วยให้เราปรับแต่งเนื้อหาของไฟล์เหล่านั้นโดยไม่ต้องแก้ไขไฟล์ใน `vendor` หากคุณไม่ต้องการปรับแต่งหรือทำการปรับแต่ง คุณอาจละเลยการกำหนดเหล่านี้ได้
