# เครื่องมือการย้ายฐานข้อมูล Phinx

## คำอธิบาย

Phinx ช่วยให้นักพัฒนาสามารถแก้ไขและบำรุงรักษาฐานข้อมูลได้อย่างสะดวก มันช่วยในการหลีกเลี่ยงการเขียนคำสั่ง SQL ด้วยตัวเอง และใช้ PHP API ที่มีพลังงานมากในการจัดการการย้ายฐานข้อมูล นักพัฒนาสามารถใช้การจัดการเวอร์ชันเพื่อการย้ายฐานข้อมูลของตนได้ Phinx สามารถทำให้ย้ายข้อมูลไปยังฐานข้อมูลที่แตกต่างกันได้ง่ายๆ และยังสามารถติดตามได้ว่าสคริปต์การย้ายไหนถูกดำเนินการแล้ว นักพัฒนาสามารถไม่ต้องกังวลเกี่ยวกับสถานะของฐานข้อมูลและสามารถให้ความสำคัญกับการเขียนระบบที่ดีขึ้นได้
  
## ที่อยู่โปรเจกต์

https://github.com/cakephp/phinx

## การติดตั้ง
 
  ```php
  composer require robmorgan/phinx
  ```
  
## ที่อยู่เอกสารภาษาไทยทางการ

สามารถดูการใช้งานแบบละเอียดได้ที่เอกสารภาษาไทยทางการ ที่นี่จะอธิบายวิธีการกำหนดค่าและใช้ใน webman 

https://tsy12321.gitbooks.io/phinx-doc/content/

## โครงสร้างไฟล์ย้าย

```
.
├── app                           โฟลเดอร์แอปพลิเคชัน
│   ├── controller                โฟลเดอร์ควบคุม
│   │   └── Index.php             ควบคุม
│   ├── model                     โฟลเดอร์โมเดล
......
├── database                      ไฟล์ฐานข้อมูล
│   ├── migrations                ไฟล์ย้าย
│   │   └── 20180426073606_create_user_table.php
│   ├── seeds                     ข้อมูลทดสอบ
│   │   └── UserSeeder.php
......
```

## การกำหนดค่า phinx.php

สร้างไฟล์ phinx.php ในโฟลเดอร์รากของโปรเจกต์

```php
<?php
return [
    "paths" => [
        "migrations" => "database/migrations",
        "seeds"      => "database/seeds"
    ],
    "environments" => [
        "default_migration_table" => "phinxlog",
        "default_database"        => "dev",
        "default_environment"     => "dev",
        "dev" => [
            "adapter" => "DB_CONNECTION",
            "host"    => "DB_HOST",
            "name"    => "DB_DATABASE",
            "user"    => "DB_USERNAME",
            "pass"    => "DB_PASSWORD",
            "port"    => "DB_PORT",
            "charset" => "utf8"
        ]
    ]
];
```

## คำแนะนำในการใช้

เมื่อไฟล์ย้ายถูกผสมรวมแล้ว จะไม่อนุญาตให้แก้ไขอีกครั้ง ถ้ามีปัญหาจะต้องสร้างไฟล์การแก้ไขหรือลบเพื่อดำเนินการ

#### กฎการตั้งชื่อไฟล์การสร้างตาราง

`{เวลา(สร้างอัตโนมัติ)}_create_{ชื่อตารางเป็นภาษาอังกฤษเล็ก}`

#### กฎการตั้งชื่อไฟล์การแก้ไขตาราง

`{เวลา(สร้างอัตโนมัติ)}_modify_{ชื่อตารางเป็นภาษาอังกฤษเล็ก+รายการแก้ไขเป็นภาษาอังกฤษเล็ก}`

### กฎการตั้งชื่อไฟล์การลบตาราง

`{เวลา(สร้างอัตโนมัติ)}_delete_{ชื่อตารางเป็นภาษาอังกฤษเล็ก+รายการแก้ไขเป็นภาษาอังกฤษเล็ก}`

### กฎการตั้งชื่อไฟล์การเติมข้อมูล

`{เวลา(สร้างอัตโนมัติ)}_fill_{ชื่อตารางเป็นภาษาอังกฤษเล็ก+รายการแก้ไขเป็นภาษาอังกฤษเล็ก}`

