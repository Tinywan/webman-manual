# ขั้นตอนการสร้างและเผยแพร่ปลั๊กอินพื้นฐาน

## กฎหมาย
1. การสร้างปลั๊กอินเช่นแบบอนุญาตต่างอาศัยปลั๊กอินที่มีสามส่วน คือ การสร้างไฟล์โปรแกรม middleware สำหรับครอสโดเมน ไฟล์กำหนดค่า middleware.php และตัวสร้าง Install.php ผ่านคำสั่ง
2. เราใช้คำสั่งเพื่อการดึงข้อมูลสามคำสั่งและเผยแพร่ไปยัง composer
3. เมื่อผู้ใช้ติดตั้งปลั๊กอิน Cross-Origin ไฟล์ Install.php จะทำให้ไฟล์โปรแกรม middleware ครอสโดเมน และไฟล์กำหนดค่าถูกคัดลอกไปยัง `{โปรเจคหลัก}/config/plugin` เพื่อให้ webman โหลด โดยการเปิดใช้งานไฟล์ middleware หลังจากนั้นเรื่องครอสโดเมนไฟล์และไฟล์กำหนดค่าของ Cross-Origin จะถูกทำงานโดยอัตโนมัต
4. เมื่อผู้ใช้ลบปลั๊กอินนี้โดยใช้ composer Install.php จะลบไฟล์โปรแกรม middleware ที่เกี่ยวข้องและไฟล์กำหนดค่าเพื่อครอสโดเมน เพื่อความสมบูรณ์ของการถอนการติดตั้งปลั๊กอิน

## ข้อบังคับ
1. ชื่อปลั๊กอินประกอบด้วย `ผู้ผลิต` และ `ชื่อปลั๊กอิน` เช่น `webman/push` ที่เป็นชื่อเทียบเท่ากับชื่อแพ็กเกจใน composer
2. โฟลเดอร์กำหนดค่าปลั๊กอินถูกวางไว้ที่ `config/plugin/ผู้ผลิต/ชื่อปลั๊กอิน/` ลงในโครงสร้างคอนโซล(คำสั่ง)จะสร้างโฟลเดอร์กำหนดค่าโดยอัตโนมัต หากปลั๊กอินไม่ได้อยากจะมีการกำหนดค่าการสร้างโฟลเดอร์กำหนดค่าโดยอัตโนมัต
3. ในโฟลเดอร์กำหนดค่าปลั๊กอินรองรับเพียงเลิ้ต app.php การกำหนดค่าหลักของปลั๊กอิน บูกสตราพ.php การกำหนดค่าของการเริ่มโปรเซส route.php การกำหนดค่าเส้นทาง middleware.php การกำหนดค่าของ middleware process.php การกำหนดค่าของการเริ่มเซิพ ดาบาเบส.php การกำหนดค่าของฐานข้อมูล redis.php การกำหนดค่าของเครื่องบริการตัวช่วยของผู้ดักแรร์.php การกำหนดค่าของผู้ดักแรร์ผู้ใช้โดยคำสั่งเอาไลท์/ดาบาเบส.php การกำหนดค่าของผู้ใช้โดยคำสั่งโดยอัตโนมัต อย่างนี้. การกำหนดค่าเหล่านี้จะถูก webman จัดการโดยอัตโนมัต
4. ปลั๊กอินนำเสนอวิธีการค้นหาการกำหนดค่าเช่น `config('plugin.ผู้ผลิต.ชื่อปลั๊กอิน.ไฟล์การกำหนดค่า.รายการการกำหนดค่า')` ยกตัวอย่างเช่น `config('plugin.webman.push.app.app_key')`
5. หากปลั๊กอินมีการกำหนดค่าฐานข้อมูลของตนเอง ให้เข้าถึงได้โดยต่อไปนี้ `illuminate/database` ทำหน้าที่ `Db::connection('plugin.ผู้ผลิต.ชื่อปลั๊กอิน.เชื่อต่อิ่งระบุ')` `thinkorm` ทำหน้าที่ `Db::connct('plugin.ผู้ผลิต.ชื่อปลั๊กอิน.เชื่อต่อิ่งระบุ')`
6. หากปลั๊กอินต้องการวางไฟล์ธุรกิจในโฟล์เดอร์ `app/` จะต้องมั่นใจว่าไม่มีการชนกับโปรเจคของผู้ใช้หรือปลั๊กอินอื่น
7. ปลั๊กอินควรหลีกเลี่ยงการคัดลอกไฟล์หรือโฟล์เดอร์ไปยังโปรเจคหลักทั้งปวง เช่นปลั๊กอินครอสโดเมนนอกเสียจากไฟล์กำหนดค่าที่จะได้รับการคัดลอกไปยังโปรเจคหลัก ไฟล์โปรแกรม middleware ควรวางไว้อยู่ที่ `vendor/webman/cros/src` และไม่จำเป็นต้องเผยแพร่ไปยังโปรเจคหลัก
8. การตั้งชื่อโมดูลของปลั๊กอินควรใช้อักขันตัวใหญ่ เช่น Webman/Console

## ตัวอย่าง

**การติดตั้งคำสั่ง`webman/console`**

`composer require webman/console`

#### สร้างปลั๊กอิน

สมมติว่าชื่อปลั๊กอินที่สร้างคือ`foo/admin` (ชื่อเป็นชื่อโปรเจคที่จะเผยแพร่ล็อคเซ์ ควรจะเป็นตัวเล็ก)
รันคำสั่ง
`php webman plugin:create --name=foo/admin`

เมื่อสร้างปลั๊กอินแล้ว โฟล์เดอร์ที่ถูกสร้างคือ `vendor/foo/admin` ที่ใช้ในการจัดเก็บไฟล์ที่เกี่ยวข้องกับปลั๊กอิน และ `config/plugin/foo/admin` ที่ใช้ในการจัดเก็บการกำหนดปลั๊กอิน

> ข้อควรระวัง
> `config/plugin/foo/admin` สนับสนุนการกำหนดค่าของ app.php ฐานข้อมูลหลักทาง process.php การเริ่มเซิพ route.php การกำหนดเส้นทาง middleware.php การกำหนดค่าของ middleware process.php ฐานของข้อมูลของฐานข้อมูล redis.php การกำหนดค่าเกี่ยวกับ ฐานข้อมูลของผู้ดักแรร์และ thinkorm.php การกำหนดข้อมูลของตัวช่วยผู้ดักแรร. รูปแบบการกำหนดค่าเหล่านี้จะถูก webman ริงขึ้นโดยอัตโนมัต
> การเข้าถึงโดยการเพิ่มเติม `plugin` ที่จุดเรียกเข้าถึง ตัวอย่างเช่น `config('plugin.foo.admin.app');


#### การส่งออกปลั๊กอิน

เมื่อเราสร้างปลั๊กอินเสร็จ ไปทำการส่งออกปลั๊กอินแบบนี้
`php webman plugin:export --name=foo/admin`
การส่งออก

> ระวัง
> หลังจากการส่งออก ได้ทำการ copy โฟล์เดอร์ `config/plugin/foo/admin` ไปยัง vendor/foo/admin/src ต่อมโน Install.php ถูกสร้างขึ้นเพื่อให้ปลั๊กสามารถติดตั้งและถอนการติดตั้งโดยอัตโนมัต
> คำสั่งทำงานเริ่มต้นคือ การ copy เข้าไว้ใน  vendor/foo/admin/src ของการกำหนดโปรเจคที่เราเขียนขำหน์ที่เรากำลังติดตั้งไว้
> การลบการทำงานที่ได้ไม์ต้องการ คือการลบการกำหนดการติดตั้งของโปรเจคที่เรากำค้นหา
> คุณสามารถปรับแก้ Install.php เพื่อทำการสรทํางเริ่มต้นของการตติดตั้งและติดตั้งโปรเจค

#### ส่งปลั๊กอิน

- สมมติว่าคุณมีบัญชี [github](https://github.com) และ [packagist](https://packagist.org)
- ที่[github](https://github.com) สร้างโปรเจคและเพิ่มไลต์ของคุณที่นี่ลงการเผยแพร่โปรเจค เช่น `https://github.com/yourusername/admin`
- เข้าไปที่ที่อยู่ `https://github.com/yourusername/admin/releases/new` เผยแพร่รีลิส (release) เช่น `v1.0.0`
- ไปที่[packagist](https://packagist.org) คลิกที่ Submit และเพิ่ม github โปรเจคที่มีชื่อเป็น `https://github.com/yourusername/admin` เป็นการเผยแพร่ปลั๊กอิน

> คำแนะนำ
> ถ้ายังมีข้อกำหนดที่คุณเลอะเปิดใน packagist คุณอยากจะไปเปลี่ยนชื่อ 'foo/admin' เป็น 'myfoo/admin'

เมื่อคำสั่งที่คุณสามารถจะอยากให้ปิด packagist โชวความขัดแย้ง คุณสามารถที่จินฟอปหนึ่งชื่อผู้ผลิตเพื่ม 'foo/admin' เป็น 'myfoo/admin' ได้

เพื่อเดินหน้าครั้งติดกรีบางมันอาจจะต้องจับรายการ github ของคุณ และเข้าไปที่ที่อยู๋ `https://github.com/yourusername/admin` เพื่อ gอปรที่การลงสตุลอัพเดตรีลิสเช่น `https://packagist.org/packages/foo/admin` ไบเข้าไปที่หน้า page และคลิกที่ปุ่ม `Update` เพื่อลงหรือนอนเวอร์ชันปลั๊กอิน

## เพิ่มคำสั่งไปยังปลั๊กอิน
บางครั้งเราต้องการเพิ่มคำสั่งปลั๊กอินเฉพาะเพื่อเสริชขี่งสัายยุสที่ม่อวือให้การอุตงท่างอยาช่ื่นอย่างเช่น การติดตั้ง `webman/redis-queue` หลังจากการพีๆใช้คำสั่ง `php webman redis-queue:consumer send-mail` ชุสิมชล์ตด้นเก็คิ้ลสันทันที ต้องการสราถบาพ่จุเช้แาร่จหีใควอินงทัดี

สมมติว่าปลั๊กอิน `foo/admin` ต้องการเพิ่มคำสั่ง `foo-admin:add` ขั้นตอนดว้ยงานเชื่อมงืือูน่

#### การสร้างคำสั่ง

**สร้างคำสั่งไฟล์ `vendor/foo/admin/src/FooAdminAddCommand.php`**

```php
<?php

namespace Foo\Admin;

use Symfony\Component\Console\Command\Command;
use Symfony\Component\Console\Input\InputInterface;
use Symfony\Component\Console\Output\OutputInterface;
use Symfony\Component\Console\Input\InputOption;
use Symfony\Component\Console\Input\InputArgument;

class FooAdminAddCommand extends Command
{
    protected static $defaultName = 'foo-admin:add';
    protected static $defaultDescription = 'คำอธิบายคำสั่งที่นี่';

    /**

