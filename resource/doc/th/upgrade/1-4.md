# 1.4 คู่มือการอัพเกรด

**ก่อนทำการอัพเกรด โปรดสำรองข้อมูล และทำการอัพเกรดโดยใช้คำสั่งต่อไปนี้**
`composer require workerman/webman-framework ^1.4.7 && composer require webman/console ^1.2.12 && php webman install`

> **โปรดทราบ**
> หากไม่สามารถทำการอัพเกรด อาจเป็นเพราะใช้โปรแกรมตัวแทนของ composer โปรดใช้คำสั่งต่อไปนี้ `composer config -g --unset repos.packagist` เพื่อกู้คืนการใช้งานฐานข้อมูลทางการของ composer

# คุณลักษณะและการเปลี่ยนแปลง

## ปลั๊กอินแอพ
เวอร์ชัน 1.4 รองรับปลั๊กอินแอพ อ่านเพิ่มเติมได้ที่[ปลั๊กอินแอพ](../plugin/app.md)

## การระบุเส้นทางอัตโนมัติ
เวอร์ชัน 1.4 รองรับกฎในการจัดการชั้นควบคุมที่ซับซ้อนต่าง ๆ เช่น
```
app
├── admin
│   └── v1
│       └── v2
│           └── v3
│               └── controller
│                   └── Index.php
└── controller
    ├── v1
    │   └── Index.php
    └── v2
        └── v3
            └── Index.php
```
กล่าวคือ ปลั๊กอิน `webman/auto-route` ไม่จำเป็นต้องใช้แล้ว

## การเปิดใช้งานบริการ HTTP
เวอร์ชัน 1.4 รองรับการเปิดใช้งานพอร์ตหลาย ๆ พอร์ตเพื่อให้บริการ HTTP ดูเพิ่มเติมที่[การประมวลผลธุรกิจที่ช้า](../others/task.md)

## การกำหนดค่าไฟล์มุมมอง
เฉพาะส่วนขยายสามารถกำหนดไว้ในตัวเลือกของ view.php
**ไม่ได้อัพเกรดจากข้องสมมาตร**
```php
use support\view\Raw;
return [
    'handler' => Raw::class,
    'view_suffix' => '.php'
];
```
**การใช้งานที่ถูกต้อง**
```php
use support\view\Raw;
return [
    'handler' => Raw::class,
    'options' => [
        'view_suffix' => '.php'
    ]
];
```

## เปลี่ยนแปลงขอบเขตการเก็บข้อมูลของเซสชัน
เริ่มตั้นเวอร์ชัน 1.4.0 เว็บแมนได้ทำการเปลี่ยนแปลงขอบเขตของคลาส `SessionHandler` จาก
```php
use Webman\FileSessionHandler;  
use Webman\RedisSessionHandler;  
use Webman\RedisClusterSessionHandler;  
```
เป็น  
```php
use Webman\Session\FileSessionHandler;  
use Webman\Session\RedisSessionHandler;  
use Webman\Session\RedisClusterSessionHandler;
```

เพื่อหลีกเลี่ยงข้อผิดพลาดที่เกิดขึ้นหลังจากการอัพเกรด คลาส `Webman\FileSessionHandler` ยังคงถูกเก็บไว้เป็นบางระยะเวลา ในเวอร์ชันที่เป็นอนากร หากทำการอัพเกรดภายหลัง คลาสนี้จะถูกลบออกทิ้ง

การเปลี่ยนแปลงนี้จะมีผลกับการกำหนดค่า `'handler'` ใน `config/session.php`
